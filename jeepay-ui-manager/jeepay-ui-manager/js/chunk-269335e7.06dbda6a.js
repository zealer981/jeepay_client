(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-269335e7"],{"0fea":function(e,a,t){"use strict";t.d(a,"K",(function(){return i})),t.d(a,"L",(function(){return n})),t.d(a,"a",(function(){return s})),t.d(a,"n",(function(){return o})),t.d(a,"m",(function(){return u})),t.d(a,"q",(function(){return l})),t.d(a,"s",(function(){return c})),t.d(a,"c",(function(){return d})),t.d(a,"g",(function(){return p})),t.d(a,"e",(function(){return f})),t.d(a,"l",(function(){return m})),t.d(a,"t",(function(){return h})),t.d(a,"f",(function(){return y})),t.d(a,"h",(function(){return v})),t.d(a,"p",(function(){return b})),t.d(a,"o",(function(){return g})),t.d(a,"b",(function(){return C})),t.d(a,"k",(function(){return _})),t.d(a,"d",(function(){return k})),t.d(a,"i",(function(){return S})),t.d(a,"j",(function(){return x})),t.d(a,"r",(function(){return O})),t.d(a,"P",(function(){return E})),t.d(a,"y",(function(){return I})),t.d(a,"H",(function(){return V})),t.d(a,"M",(function(){return j})),t.d(a,"u",(function(){return q})),t.d(a,"J",(function(){return $})),t.d(a,"z",(function(){return T})),t.d(a,"A",(function(){return w})),t.d(a,"v",(function(){return A})),t.d(a,"C",(function(){return K})),t.d(a,"B",(function(){return N})),t.d(a,"D",(function(){return U})),t.d(a,"E",(function(){return F})),t.d(a,"O",(function(){return L})),t.d(a,"N",(function(){return R})),t.d(a,"F",(function(){return G})),t.d(a,"w",(function(){return J})),t.d(a,"x",(function(){return B})),t.d(a,"G",(function(){return M})),t.d(a,"I",(function(){return D}));var r=t("4667"),i={list:function(e,a){return r["a"].request({url:e,method:"GET",params:a},!0,!0,!1)},add:function(e,a){return r["a"].request({url:e,method:"POST",data:a},!0,!0,!1)},getById:function(e,a){return r["a"].request({url:e+"/"+a,method:"GET"},!0,!0,!1)},updateById:function(e,a,t){return r["a"].request({url:e+"/"+a,method:"PUT",data:t},!0,!0,!1)},delById:function(e,a){return r["a"].request({url:e+"/"+a,method:"DELETE"},!0,!0,!1)}},n={list:function(e,a){return r["a"].request({url:e,method:"GET",params:a},!0,!0,!0)},add:function(e,a){return r["a"].request({url:e,method:"POST",data:a},!0,!0,!0)},getById:function(e,a){return r["a"].request({url:e+"/"+a,method:"GET"},!0,!0,!0)},updateById:function(e,a,t){return r["a"].request({url:e+"/"+a,method:"PUT",data:t},!0,!0,!0)},delById:function(e,a){return r["a"].request({url:e+"/"+a,method:"DELETE"},!0,!0,!0)}},s="/api/sysEnts",o="/api/sysRoles",u="/api/sysRoleEntRelas",l="/api/sysUsers",c="/api/sysUserRoleRelas",d="/api/isvInfo",p="/api/mchInfo",f="/api/mchApps",m="/api/payOrder",h="/api/withDrawOrder",y="api/mchBalance",v="/api/mchNotify",b="api/sysLog",g="api/sysConfigs",P="api/mainChart",C="/api/payIfDefines",_="/api/payWays",k="/api/isv/payConfigs",S="/api/mch/payConfigs",x="/api/mch/payPassages",O="/api/transferOrders",E={avatar:r["a"].baseUrl+"/api/ossFiles/avatar",ifBG:r["a"].baseUrl+"/api/ossFiles/ifBG",cert:r["a"].baseUrl+"/api/ossFiles/cert"};function I(e){return r["a"].request({url:"/api/sysEnts/showTree?sysType="+e,method:"GET"})}function V(e,a,t){return r["a"].request({url:"/api/payOrder/refunds/"+e,method:"POST",data:{refundAmount:a,refundReason:t}})}function j(e,a){return r["a"].request({url:"api/sysUserRoleRelas/relas/"+e,method:"POST",data:{roleIdListStr:JSON.stringify(a)}})}function q(e){return r["a"].request({url:"/api/withDrawOrder/audit/"+e,method:"post"})}function $(e){return r["a"].request({url:"/api/withDrawOrder/reject/"+e,method:"post"})}function T(e,a){return r["a"].request({url:"/api/isv/payConfigs/"+e+"/"+a,method:"get"})}function w(e,a){return r["a"].request({url:"/api/mch/payConfigs/"+e+"/"+a,method:"get"})}function A(e,a){return r["a"].request({url:"/api/mch/payPassages/availablePayInterface/"+e+"/"+a,method:"GET"})}function K(){return r["a"].request({url:P+"/payAmountWeek",method:"GET"})}function N(){return r["a"].request({url:P+"/numCount",method:"GET"})}function U(e){return r["a"].request({url:P+"/payCount",method:"GET",params:e})}function F(e){return r["a"].request({url:P+"/payTypeCount",method:"GET",params:e})}function L(e){return r["a"].request({url:"/api/current/modifyPwd",method:"put",data:e})}function R(e){return r["a"].request({url:"/api/current/user",method:"put",data:e})}function G(){return r["a"].request({url:"/api/current/user",method:"get"})}function J(e){return r["a"].request({url:g+"/"+e,method:"GET"})}function B(e,a){return r["a"].request({url:"/api/sysEnts/bySysType",method:"GET",params:{entId:e,sysType:a}})}function M(e){return r["a"].request({url:"/api/mchNotify/resend/"+e,method:"POST"})}function D(e){return r["a"].request({url:"/api/mch/payConfigs/alipayIsvsubMchAuthUrls/"+e,method:"GET"})}},6100:function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-drawer",{attrs:{title:"填写参数",width:"40%",closable:!0,maskClosable:!1,visible:e.visible,"body-style":{paddingBottom:"80px"}},on:{close:e.onClose}},[t("a-form-model",{ref:"infoFormModel",attrs:{model:e.saveObject,layout:"vertical",rules:e.rules}},[t("a-row",{attrs:{gutter:16}},[t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"支付接口费率",prop:"ifRate"}},[t("a-input",{attrs:{placeholder:"请输入",suffix:"%"},model:{value:e.saveObject.ifRate,callback:function(a){e.$set(e.saveObject,"ifRate",a)},expression:"saveObject.ifRate"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"状态",prop:"state"}},[t("a-radio-group",{model:{value:e.saveObject.state,callback:function(a){e.$set(e.saveObject,"state",a)},expression:"saveObject.state"}},[t("a-radio",{attrs:{value:1}},[e._v(" 启用 ")]),t("a-radio",{attrs:{value:0}},[e._v(" 停用 ")])],1)],1)],1),t("a-col",{attrs:{span:24}},[t("a-form-model-item",{attrs:{label:"备注",prop:"remark"}},[t("a-input",{attrs:{placeholder:"请输入",type:"textarea"},model:{value:e.saveObject.remark,callback:function(a){e.$set(e.saveObject,"remark",a)},expression:"saveObject.remark"}})],1)],1)],1)],1),t("a-divider",{attrs:{orientation:"left"}},[t("a-tag",{attrs:{color:"#FF4B33"}},[e._v(" "+e._s(e.saveObject.ifCode)+" 服务商参数配置 ")])],1),t("a-form-model",{ref:"isvParamFormModel",attrs:{model:e.ifParams,layout:"vertical",rules:e.ifParamsRules}},[t("a-row",{attrs:{gutter:16}},[t("a-col",{attrs:{span:"12"}},[t("a-form-model-item",{attrs:{label:"微信支付商户号",prop:"mchId"}},[t("a-input",{attrs:{placeholder:"请输入"},model:{value:e.ifParams.mchId,callback:function(a){e.$set(e.ifParams,"mchId",a)},expression:"ifParams.mchId"}})],1)],1),t("a-col",{attrs:{span:"12"}},[t("a-form-model-item",{attrs:{label:"应用AppID",prop:"appId"}},[t("a-input",{attrs:{placeholder:"请输入"},model:{value:e.ifParams.appId,callback:function(a){e.$set(e.ifParams,"appId",a)},expression:"ifParams.appId"}})],1)],1),t("a-col",{attrs:{span:"12"}},[t("a-form-model-item",{attrs:{label:"应用AppSecret",prop:"appSecret"}},[t("a-input",{attrs:{placeholder:e.ifParams.appSecret_ph},model:{value:e.ifParams.appSecret,callback:function(a){e.$set(e.ifParams,"appSecret",a)},expression:"ifParams.appSecret"}})],1)],1),t("a-col",{attrs:{span:"12"}},[t("a-form-model-item",{attrs:{label:"oauth2地址（置空将使用官方）",prop:"oauth2Url"}},[t("a-input",{attrs:{placeholder:"请输入"},model:{value:e.ifParams.oauth2Url,callback:function(a){e.$set(e.ifParams,"oauth2Url",a)},expression:"ifParams.oauth2Url"}})],1)],1),t("a-col",{attrs:{span:"12"}},[t("a-form-model-item",{attrs:{label:"微信支付API版本",prop:"apiVersion"}},[t("a-radio-group",{attrs:{defaultValue:"V2"},model:{value:e.ifParams.apiVersion,callback:function(a){e.$set(e.ifParams,"apiVersion",a)},expression:"ifParams.apiVersion"}},[t("a-radio",{attrs:{value:"V2"}},[e._v("V2")]),t("a-radio",{attrs:{value:"V3"}},[e._v("V3")])],1)],1)],1),t("a-col",{attrs:{span:"24"}},[t("a-form-model-item",{attrs:{label:"APIv2密钥",prop:"key"}},[t("a-input",{attrs:{placeholder:e.ifParams.key_ph,type:"textarea"},model:{value:e.ifParams.key,callback:function(a){e.$set(e.ifParams,"key",a)},expression:"ifParams.key"}})],1)],1),t("a-col",{attrs:{span:"24"}},[t("a-form-model-item",{attrs:{label:"APIv3密钥",prop:"apiV3Key"}},[t("a-input",{attrs:{placeholder:e.ifParams.apiV3Key_ph,type:"textarea"},model:{value:e.ifParams.apiV3Key,callback:function(a){e.$set(e.ifParams,"apiV3Key",a)},expression:"ifParams.apiV3Key"}})],1)],1),t("a-col",{attrs:{span:"24"}},[t("a-form-model-item",{attrs:{label:"序列号",prop:"serialNo"}},[t("a-input",{attrs:{placeholder:e.ifParams.serialNo_ph,type:"textarea"},model:{value:e.ifParams.serialNo,callback:function(a){e.$set(e.ifParams,"serialNo",a)},expression:"ifParams.serialNo"}})],1)],1),t("a-col",{attrs:{span:"24"}},[t("a-form-model-item",{attrs:{label:"API证书(apiclient_cert.p12)",prop:"cert"}},[t("a-input",{attrs:{disabled:"disabled"},model:{value:e.ifParams.cert,callback:function(a){e.$set(e.ifParams,"cert",a)},expression:"ifParams.cert"}}),t("JeepayUpload",{attrs:{action:e.action,fileUrl:e.ifParams.cert},on:{uploadSuccess:function(a){return e.uploadSuccess(a,"cert")}},scopedSlots:e._u([{key:"uploadSlot",fn:function(a){var r=a.loading;return[t("a-button",{staticStyle:{marginTop:"5px"}},[t("a-icon",{attrs:{type:r?"loading":"upload"}}),e._v(" "+e._s(r?"正在上传":"点击上传")+" ")],1)]}}])})],1)],1),t("a-col",{attrs:{span:"24"}},[t("a-form-model-item",{attrs:{label:"证书文件(apiclient_cert.pem)",prop:"apiClientCert"}},[t("a-input",{attrs:{disabled:"disabled"},model:{value:e.ifParams.apiClientCert,callback:function(a){e.$set(e.ifParams,"apiClientCert",a)},expression:"ifParams.apiClientCert"}}),t("JeepayUpload",{attrs:{action:e.action,fileUrl:e.ifParams.apiClientCert},on:{uploadSuccess:function(a){return e.uploadSuccess(a,"apiClientCert")}},scopedSlots:e._u([{key:"uploadSlot",fn:function(a){var r=a.loading;return[t("a-button",{staticStyle:{marginTop:"5px"}},[t("a-icon",{attrs:{type:r?"loading":"upload"}}),e._v(" "+e._s(r?"正在上传":"点击上传")+" ")],1)]}}])})],1)],1),t("a-col",{attrs:{span:"24"}},[t("a-form-model-item",{attrs:{label:"私钥文件(apiclient_key.pem)",prop:"apiClientKey"}},[t("a-input",{attrs:{disabled:"disabled"},model:{value:e.ifParams.apiClientKey,callback:function(a){e.$set(e.ifParams,"apiClientKey",a)},expression:"ifParams.apiClientKey"}}),t("JeepayUpload",{attrs:{action:e.action,fileUrl:e.ifParams.apiClientKey},on:{uploadSuccess:function(a){return e.uploadSuccess(a,"apiClientKey")}},scopedSlots:e._u([{key:"uploadSlot",fn:function(a){var r=a.loading;return[t("a-button",{staticStyle:{marginTop:"5px"}},[t("a-icon",{attrs:{type:r?"loading":"upload"}}),e._v(" "+e._s(r?"正在上传":"点击上传")+" ")],1)]}}])})],1)],1)],1)],1),e.$access("ENT_MCH_PAY_CONFIG_ADD")?t("div",{staticClass:"drawer-btn-center"},[t("a-button",{style:{marginRight:"8px"},attrs:{icon:"close"},on:{click:e.onClose}},[e._v("取消")]),t("a-button",{attrs:{type:"primary",icon:"check",loading:e.btnLoading},on:{click:e.onSubmit}},[e._v("保存")])],1):e._e()],1)},i=[],n=(t("b64b"),t("c73b")),s=t("909a"),o=t("0fea"),u={components:{JeepayCard:n["a"],JeepayUpload:s["a"]},props:{callbackFunc:{type:Function,default:function(){return{}}}},data:function(){var e=this;return{btnLoading:!1,visible:!1,isAdd:!0,action:o["P"].cert,saveObject:{},ifParams:{apiVersion:"V2"},rules:{ifRate:[{required:!1,pattern:/^(([1-9]{1}\d{0,1})|(0{1}))(\.\d{1,4})?$/,message:"请输入0-100之间的数字，最多四位小数",trigger:"blur"}]},ifParamsRules:{mchId:[{required:!0,message:"请输入微信支付商户号",trigger:"blur"}],appId:[{required:!0,message:"请输入应用AppID",trigger:"blur"}],appSecret:[{trigger:"blur",validator:function(a,t,r){e.isAdd&&!t&&r(new Error("请输入应用AppSecret")),r()}}],key:[{trigger:"blur",validator:function(a,t,r){"V2"===e.ifParams.apiVersion&&e.isAdd&&!t&&r(new Error("请输入API密钥")),r()}}],apiV3Key:[{trigger:"blur",validator:function(a,t,r){"V3"===e.ifParams.apiVersion&&e.isAdd&&!t&&r(new Error("请输入API V3秘钥")),r()}}],serialNo:[{trigger:"blur",validator:function(a,t,r){"V3"===e.ifParams.apiVersion&&e.isAdd&&!t&&r(new Error("请输入序列号")),r()}}],cert:[{trigger:"blur",validator:function(a,t,r){"V3"===e.ifParams.apiVersion&&e.isAdd&&!t&&r(new Error("请上传API证书(apiclient_cert.p12)")),r()}}],apiClientCert:[{trigger:"blur",validator:function(a,t,r){"V3"===e.ifParams.apiVersion&&e.isAdd&&!t&&r(new Error("请上传证书文件(apiclient_cert.pem)")),r()}}],apiClientKey:[{trigger:"blur",validator:function(a,t,r){"V3"!==e.ifParams.apiVersion||t||r(new Error("请上传私钥文件(apiclient_key.pem)")),r()}}]}}},methods:{show:function(e,a){void 0!==this.$refs.infoFormModel&&this.$refs.infoFormModel.resetFields(),void 0!==this.$refs.isvParamFormModel&&this.$refs.isvParamFormModel.resetFields(),this.saveObject={infoId:e,ifCode:a.ifCode,state:0===a.ifConfigState?0:1},this.ifParams={apiVersion:"V2",appSecret:"",appSecret_ph:"请输入",key:"",key_ph:"请输入",apiV3Key:"",apiV3Key_ph:"请输入",serialNo:"",serialNo_ph:"请输入"},this.visible=!0,this.getIsvPayConfig()},getIsvPayConfig:function(){var e=this;Object(o["z"])(e.saveObject.infoId,e.saveObject.ifCode).then((function(a){a&&a.ifParams?(e.saveObject=a,e.ifParams=JSON.parse(a.ifParams),e.ifParams.appSecret_ph=e.ifParams.appSecret,e.ifParams.appSecret="",e.ifParams.key_ph=e.ifParams.key,e.ifParams.key="",e.ifParams.apiV3Key_ph=e.ifParams.apiV3Key,e.ifParams.apiV3Key="",e.ifParams.serialNo_ph=e.ifParams.serialNo,e.ifParams.serialNo="",e.isAdd=!1):void 0===a&&(e.isAdd=!0)}))},onSubmit:function(){var e=this,a=this;this.$refs.infoFormModel.validate((function(t){e.$refs.isvParamFormModel.validate((function(r){if(t&&r){a.btnLoading=!0;var i={};if(i.infoId=a.saveObject.infoId,i.ifCode=a.saveObject.ifCode,i.ifRate=a.saveObject.ifRate,i.state=a.saveObject.state,i.remark=a.saveObject.remark,0===Object.keys(a.ifParams).length)return void e.$message.error("参数不能为空！");if(a.clearEmptyKey("appSecret"),a.clearEmptyKey("key"),a.clearEmptyKey("apiV3Key"),a.clearEmptyKey("serialNo"),i.ifParams=JSON.stringify(a.ifParams),0===Object.keys(i).length)return void e.$message.error("参数不能为空！");o["K"].add(o["d"],i).then((function(e){a.$message.success("保存成功"),a.visible=!1,a.btnLoading=!1,a.callbackFunc()}))}}))}))},clearEmptyKey:function(e){this.ifParams[e]||(this.ifParams[e]=void 0),this.ifParams[e+"_ph"]=void 0},uploadSuccess:function(e,a){this.ifParams[a]=e,this.$forceUpdate()},onClose:function(){this.visible=!1}}},l=u,c=t("2877"),d=Object(c["a"])(l,r,i,!1,null,"a073e422",null);a["default"]=d.exports},"909a":function(e,a,t){"use strict";var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("a-upload",{attrs:{name:"file",action:e.action,headers:e.headers,accept:e.accept,showUploadList:!1,multiple:!0,"before-upload":e.beforeUpload},on:{change:e.handleChange}},[e._t("uploadSlot",null,{loading:e.loading})],2)],1)},i=[],n=(t("a9e3"),t("381c")),s=t("ffef");function o(){var e={};return e[n["b"].ACCESS_TOKEN_NAME]=s["a"].getToken(),e}var u={name:"JeepayUpload",props:{action:{type:String,default:""},accept:{type:String,default:""},size:{type:Number,default:10},num:{type:Number,default:1}},data:function(){return{loading:!1,fileList:[],headers:o()}},created:function(){},methods:{handleChange:function(e){var a=e.file.response;"uploading"===e.file.status&&(this.loading=!0),"done"===e.file.status?(0!==a.code&&this.$message.error(a.msg),this.loading=!1,this.$emit("uploadSuccess",a.data)):"error"===e.file.status&&(console.log(e),this.$message.error("上传失败"))},beforeUpload:function(e){var a=e.size/1024/1024<this.size;return a||this.$message.error("文件应小于"+this.size+"M!"),a}}},l=u,c=t("2877"),d=Object(c["a"])(l,r,i,!1,null,null,null);a["a"]=d.exports},"9d22":function(e,a,t){"use strict";t("fd66")},c73b:function(e,a,t){"use strict";var r=function(){var e=this,a=e.$createElement,r=e._self._c||a;return r("div",[r("a-row",{staticStyle:{width:"100%"},attrs:{gutter:[24,24]}},[e.addAuthority?r("a-col",{attrs:{xxl:24/e.span.xxl,xl:24/e.span.xl,lg:24/e.span.lg,md:24/e.span.md,sm:24/e.span.sm,xs:24/e.span.xs},on:{click:function(a){return e.$emit("addJeepayCard")}}},[r("div",{staticClass:"jeepay-card-add",style:{height:e.height+"px"}},[r("div",{staticClass:"jeepay-card-add-top"},[r("img",{staticClass:"jeepay-card-add-icon",attrs:{src:t("e8c7"),alt:"add-icon"}}),r("img",{staticClass:"jeepay-card-add-icon-hover",attrs:{src:t("e19e"),alt:"add-icon"}})]),r("div",{staticClass:"jeepay-card-add-text"},[e._v(" 新建"+e._s(e.name)+" ")])])]):e._e(),e._l(e.cardList,(function(a,t){return r("a-col",{key:t,attrs:{xxl:24/e.span.xxl,xl:24/e.span.xl,lg:24/e.span.lg,md:24/e.span.md,sm:24/e.span.sm,xs:24/e.span.xs}},[e._t("cardContentSlot",null,{record:a}),e._t("cardOpSlot",null,{record:a})],2)}))],2)],1)},i=[],n=(t("a9e3"),{name:"JeepayCard",props:{span:{type:Object,default:function(){return{xxl:6,xl:4,lg:4,md:3,sm:2,xs:1}}},height:{type:Number,default:200},name:{type:String,default:""},addAuthority:{type:Boolean,default:!1},reqCardListFunc:{type:Function,default:function(){return function(){return{}}}}},data:function(){return{cardList:[]}},created:function(){this.refCardList()},methods:{refCardList:function(){var e=this;this.reqCardListFunc().then((function(a){e.cardList=a}))}}}),s=n,o=(t("9d22"),t("2877")),u=Object(o["a"])(s,r,i,!1,null,"47ed671f",null);a["a"]=u.exports},e19e:function(e,a,t){e.exports=t.p+"assets/add-icon-hover.50df40dd.svg"},e8c7:function(e,a,t){e.exports=t.p+"assets/add-icon.a2f73e90.svg"},fd66:function(e,a,t){}}]);
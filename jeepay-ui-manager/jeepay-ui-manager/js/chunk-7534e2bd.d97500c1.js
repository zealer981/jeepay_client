(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7534e2bd"],{3109:function(a,e,t){},"5ca3":function(a,e,t){"use strict";t.r(e);var i=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("a-drawer",{attrs:{visible:a.visible,title:"支付参数列表",closable:!0,"body-style":{paddingBottom:"80px"},"drawer-style":{backgroundColor:"#f0f2f5"},width:"80%"},on:{close:a.onClose}},[t("JeepayCard",{ref:"infoCard",attrs:{reqCardListFunc:a.reqCardListFunc,span:a.jeepayCard.span,height:a.jeepayCard.height},scopedSlots:a._u([{key:"cardContentSlot",fn:function(e){var i=e.record;return t("div",{},[t("div",{staticClass:"jeepay-card-content",style:{height:a.jeepayCard.height+"px"}},[t("div",{staticClass:"jeepay-card-content-header",style:{backgroundColor:i.bgColor,height:a.jeepayCard.height/2+"px"}},[i.icon?t("img",{style:{height:a.jeepayCard.height/5+"px"},attrs:{src:i.icon}}):a._e()]),t("div",{staticClass:"jeepay-card-content-body",style:{height:a.jeepayCard.height/2-50+"px"}},[t("div",{staticClass:"title"},[a._v(" "+a._s(i.ifName)+" ")]),t("a-badge",{attrs:{status:1===i.ifConfigState?"processing":"error",text:1===i.ifConfigState?"启用":"未开通"}})],1),t("div",{staticClass:"jeepay-card-ops"},[a.$access("ENT_ISV_PAY_CONFIG_ADD")?t("a",{on:{click:function(e){return a.editPayIfConfigFunc(i)}}},[a._v("填写参数 "),t("a-icon",{key:"right",staticStyle:{fontSize:"13px"},attrs:{type:"right"}})],1):t("a",[a._v("暂无操作")])])])])}}])}),t("a-drawer",{attrs:{title:"支付参数配置",width:"40%",closable:!0,visible:a.childrenVisible,"body-style":{paddingBottom:"80px"},maskClosable:!1},on:{close:a.onChildrenDrawerClose}},[t("a-form-model",{ref:"infoFormModel",attrs:{model:a.saveObject,layout:"vertical",rules:a.rules}},[t("a-row",{attrs:{gutter:16}},[t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"支付接口费率",prop:"ifRate"}},[t("a-input",{attrs:{placeholder:"请输入",suffix:"%"},model:{value:a.saveObject.ifRate,callback:function(e){a.$set(a.saveObject,"ifRate",e)},expression:"saveObject.ifRate"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"状态",prop:"state"}},[t("a-radio-group",{model:{value:a.saveObject.state,callback:function(e){a.$set(a.saveObject,"state",e)},expression:"saveObject.state"}},[t("a-radio",{attrs:{value:1}},[a._v(" 启用 ")]),t("a-radio",{attrs:{value:0}},[a._v(" 停用 ")])],1)],1)],1),t("a-col",{attrs:{span:24}},[t("a-form-model-item",{attrs:{label:"备注",prop:"remark"}},[t("a-input",{attrs:{placeholder:"请输入",type:"textarea"},model:{value:a.saveObject.remark,callback:function(e){a.$set(a.saveObject,"remark",e)},expression:"saveObject.remark"}})],1)],1)],1)],1),t("a-divider",{attrs:{orientation:"left"}},[t("a-tag",{attrs:{color:"#FF4B33"}},[a._v(" "+a._s(a.saveObject.ifCode)+" 服务商参数配置 ")])],1),t("a-form-model",{ref:"isvParamFormModel",attrs:{model:a.ifParams,layout:"vertical",rules:a.ifParamsRules}},[t("a-row",{attrs:{gutter:16}},a._l(a.isvParams,(function(e,i){return t("a-col",{key:i,attrs:{span:"text"===e.type?12:24}},["text"===e.type||"textarea"===e.type?t("a-form-model-item",{attrs:{label:e.desc,prop:e.name}},["1"===e.star?t("a-input",{attrs:{placeholder:a.ifParams[e.name+"_ph"],type:e.type},model:{value:a.ifParams[e.name],callback:function(t){a.$set(a.ifParams,e.name,t)},expression:"ifParams[item.name]"}}):t("a-input",{attrs:{placeholder:"请输入",type:e.type},model:{value:a.ifParams[e.name],callback:function(t){a.$set(a.ifParams,e.name,t)},expression:"ifParams[item.name]"}})],1):"radio"===e.type?t("a-form-model-item",{attrs:{label:e.desc,prop:e.name}},[t("a-radio-group",{model:{value:a.ifParams[e.name],callback:function(t){a.$set(a.ifParams,e.name,t)},expression:"ifParams[item.name]"}},a._l(e.values,(function(e,i){return t("a-radio",{key:i,attrs:{value:e.value}},[a._v(" "+a._s(e.title)+" ")])})),1)],1):"file"===e.type?t("a-form-model-item",{attrs:{label:e.desc,prop:e.name}},[t("a-input",{attrs:{disabled:"disabled"},model:{value:a.ifParams[e.name],callback:function(t){a.$set(a.ifParams,e.name,t)},expression:"ifParams[item.name]"}}),t("JeepayUpload",{attrs:{action:a.action,fileUrl:a.ifParams[e.name]},on:{uploadSuccess:function(t){return a.uploadSuccess(t,e.name)}},scopedSlots:a._u([{key:"uploadSlot",fn:function(e){var i=e.loading;return[t("a-button",{staticStyle:{marginTop:"5px"}},[t("a-icon",{attrs:{type:i?"loading":"upload"}}),a._v(" "+a._s(i?"正在上传":"点击上传")+" ")],1)]}}],null,!0)})],1):a._e()],1)})),1)],1),t("div",{staticClass:"drawer-btn-center"},[t("a-button",{style:{marginRight:"8px"},attrs:{icon:"close"},on:{click:a.onChildrenDrawerClose}},[a._v(" 取消 ")]),t("a-button",{attrs:{type:"primary",loading:a.btnLoading,icon:"check"},on:{click:a.onSubmit}},[a._v(" 保存 ")])],1)],1),t("WxpayPayConfig",{ref:"wxpayPayConfig",attrs:{callbackFunc:a.refCardList}}),t("AlipayPayConfig",{ref:"alipayPayConfig",attrs:{callbackFunc:a.refCardList}})],1)},r=[],s=(t("159b"),t("b0c0"),t("ac1f"),t("1276"),t("d3b7"),t("ddb0"),t("a9e3"),t("b64b"),t("c73b")),o=t("909a"),l=t("6100"),n=t("61d4"),c=t("0fea"),d={components:{JeepayCard:s["a"],JeepayUpload:o["a"],WxpayPayConfig:l["default"],AlipayPayConfig:n["default"]},data:function(){return{btnLoading:!1,isvNo:null,action:c["P"].cert,visible:!1,childrenVisible:!1,isvParams:{},saveObject:{},ifParams:{},jeepayCard:{height:300,span:{xxl:6,xl:4,lg:4,md:3,sm:2,xs:1}},rules:{infoId:[{required:!0,trigger:"blur"}],ifCode:[{required:!0,trigger:"blur"}],ifRate:[{required:!1,pattern:/^(([1-9]{1}\d{0,1})|(0{1}))(\.\d{1,4})?$/,message:"请输入0-100之间的数字，最多四位小数",trigger:"blur"}]},ifParamsRules:{}}},watch:{ifParams:function(a,e){this.$set(this.ifParams,"appSecret",this.ifParams.appSecret)}},methods:{generoterRules:function(){var a={},e=[];this.isvParams.forEach((function(t){e=[],"required"===t.verify&&"1"!==t.star&&(e.push({required:!0,message:"请输入"+t.desc,trigger:"blur"}),a[t.name]=e)})),this.ifParamsRules=a},show:function(a){this.isvNo=a,this.ifCode=null,this.visible=!0,this.refCardList()},reqCardListFunc:function(){return c["K"].list(c["d"],{isvNo:this.isvNo})},refCardList:function(){this.$refs.infoCard.refCardList()},editPayIfConfigFunc:function(a){var e=this;if(1===a.configPageType){if(void 0!==this.$refs.infoFormModel&&this.$refs.infoFormModel.resetFields(),void 0!==this.$refs.isvParamFormModel&&this.$refs.isvParamFormModel.resetFields(),this.childrenVisible=!0,this.saveObject={},this.ifParams={},this.isvParams={},this.saveObject.infoId=this.isvNo,this.saveObject.ifCode=a.ifCode,this.saveObject.state=0===a.ifConfigState?0:1,!a)return;var t=this;Object(c["z"])(this.saveObject.infoId,this.saveObject.ifCode).then((function(i){i&&i.ifParams&&(e.saveObject=i,e.ifParams=JSON.parse(i.ifParams));var r=[];JSON.parse(a.isvParams).forEach((function(a){var e=[];if("radio"===a.type){var i=a.values.split(","),s=a.titles.split(",");for(var o in i){var l=i[o];isNaN(l)||(l=Number(l)),e.push({value:l,title:s[o]})}}"1"===a.star&&(t.ifParams[a.name+"_ph"]=t.ifParams[a.name]?t.ifParams[a.name]:"请输入",t.ifParams[a.name]&&(t.ifParams[a.name]="")),r.push({name:a.name,desc:a.desc,type:a.type,verify:a.verify,values:e,star:a.star})})),t.isvParams=r,t.generoterRules(),t.$forceUpdate()}))}else 2===a.configPageType&&this.$refs[a.ifCode+"PayConfig"].show(this.isvNo,a)},onSubmit:function(){var a=this,e=this;this.$refs.infoFormModel.validate((function(t){a.$refs.isvParamFormModel.validate((function(i){if(t&&i){e.btnLoading=!0;var r={};if(r.infoId=e.saveObject.infoId,r.ifCode=e.saveObject.ifCode,r.ifRate=e.saveObject.ifRate,r.state=e.saveObject.state,r.remark=e.saveObject.remark,0===Object.keys(e.ifParams).length)return void a.$message.error("参数不能为空！");a.isvParams.forEach((function(a){"1"===a.star&&""===e.ifParams[a.name]&&(e.ifParams[a.name]=void 0),e.ifParams[a.name+"_ph"]=void 0})),r.ifParams=JSON.stringify(e.ifParams),c["K"].add(c["d"],r).then((function(a){e.$message.success("保存成功"),e.childrenVisible=!1,e.refCardList(),e.btnLoading=!1}))}}))}))},uploadSuccess:function(a,e){this.ifParams[e]=a,this.$forceUpdate()},onClose:function(){this.visible=!1},onChildrenDrawerClose:function(){this.childrenVisible=!1}}},f=d,p=(t("a655"),t("2877")),u=Object(p["a"])(f,i,r,!1,null,"d5e76e6c",null);e["default"]=u.exports},"61d4":function(a,e,t){"use strict";t.r(e);var i=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("a-drawer",{attrs:{title:"填写参数",width:"40%",closable:!0,maskClosable:!1,visible:a.visible,"body-style":{paddingBottom:"80px"}},on:{close:a.onClose}},[t("a-form-model",{ref:"infoFormModel",attrs:{model:a.saveObject,layout:"vertical",rules:a.rules}},[t("a-row",{attrs:{gutter:16}},[t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"支付接口费率",prop:"ifRate"}},[t("a-input",{attrs:{placeholder:"请输入",suffix:"%"},model:{value:a.saveObject.ifRate,callback:function(e){a.$set(a.saveObject,"ifRate",e)},expression:"saveObject.ifRate"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"状态",prop:"state"}},[t("a-radio-group",{model:{value:a.saveObject.state,callback:function(e){a.$set(a.saveObject,"state",e)},expression:"saveObject.state"}},[t("a-radio",{attrs:{value:1}},[a._v(" 启用 ")]),t("a-radio",{attrs:{value:0}},[a._v(" 停用 ")])],1)],1)],1),t("a-col",{attrs:{span:24}},[t("a-form-model-item",{attrs:{label:"备注",prop:"remark"}},[t("a-input",{attrs:{placeholder:"请输入",type:"textarea"},model:{value:a.saveObject.remark,callback:function(e){a.$set(a.saveObject,"remark",e)},expression:"saveObject.remark"}})],1)],1)],1)],1),t("a-divider",{attrs:{orientation:"left"}},[t("a-tag",{attrs:{color:"#FF4B33"}},[a._v(" "+a._s(a.saveObject.ifCode)+" 服务商参数配置 ")])],1),t("a-form-model",{ref:"isvParamFormModel",attrs:{model:a.ifParams,layout:"vertical",rules:a.ifParamsRules}},[t("a-row",{attrs:{gutter:16}},[t("a-col",{attrs:{span:"24"}},[t("a-form-model-item",{attrs:{label:"环境配置",prop:"sandbox"}},[t("a-radio-group",{model:{value:a.ifParams.sandbox,callback:function(e){a.$set(a.ifParams,"sandbox",e)},expression:"ifParams.sandbox"}},[t("a-radio",{attrs:{value:1}},[a._v("沙箱环境")]),t("a-radio",{attrs:{value:0}},[a._v("生产环境")])],1)],1)],1),t("a-col",{attrs:{span:"12"}},[t("a-form-model-item",{attrs:{label:"合作伙伴身份（PID）",prop:"pid"}},[t("a-input",{attrs:{placeholder:"请输入"},model:{value:a.ifParams.pid,callback:function(e){a.$set(a.ifParams,"pid",e)},expression:"ifParams.pid"}})],1)],1),t("a-col",{attrs:{span:"12"}},[t("a-form-model-item",{attrs:{label:"应用AppID",prop:"appId"}},[t("a-input",{attrs:{placeholder:"请输入"},model:{value:a.ifParams.appId,callback:function(e){a.$set(a.ifParams,"appId",e)},expression:"ifParams.appId"}})],1)],1),t("a-col",{attrs:{span:"24"}},[t("a-form-model-item",{attrs:{label:"应用私钥",prop:"privateKey"}},[t("a-input",{attrs:{placeholder:a.ifParams.privateKey_ph,type:"textarea"},model:{value:a.ifParams.privateKey,callback:function(e){a.$set(a.ifParams,"privateKey",e)},expression:"ifParams.privateKey"}})],1)],1),t("a-col",{attrs:{span:"24"}},[t("a-form-model-item",{attrs:{label:"支付宝公钥",prop:"alipayPublicKey"}},[t("a-input",{attrs:{placeholder:a.ifParams.alipayPublicKey_ph,type:"textarea"},model:{value:a.ifParams.alipayPublicKey,callback:function(e){a.$set(a.ifParams,"alipayPublicKey",e)},expression:"ifParams.alipayPublicKey"}})],1)],1),t("a-col",{attrs:{span:"12"}},[t("a-form-model-item",{attrs:{label:"接口签名方式(推荐使用RSA2)",prop:"signType"}},[t("a-radio-group",{attrs:{defaultValue:"RSA"},model:{value:a.ifParams.signType,callback:function(e){a.$set(a.ifParams,"signType",e)},expression:"ifParams.signType"}},[t("a-radio",{attrs:{value:"RSA"}},[a._v("RSA")]),t("a-radio",{attrs:{value:"RSA2"}},[a._v("RSA2")])],1)],1)],1),t("a-col",{attrs:{span:"12"}},[t("a-form-model-item",{attrs:{label:"公钥证书",prop:"useCert"}},[t("a-radio-group",{attrs:{defaultValue:"1"},model:{value:a.ifParams.useCert,callback:function(e){a.$set(a.ifParams,"useCert",e)},expression:"ifParams.useCert"}},[t("a-radio",{attrs:{value:1}},[a._v("使用证书（请使用RSA2私钥）")]),t("a-radio",{attrs:{value:0}},[a._v("不使用证书")])],1)],1)],1),t("a-col",{attrs:{span:"24"}},[t("a-form-model-item",{attrs:{label:"应用公钥证书（.crt格式）",prop:"appPublicCert"}},[t("a-input",{attrs:{disabled:"disabled"},model:{value:a.ifParams.appPublicCert,callback:function(e){a.$set(a.ifParams,"appPublicCert",e)},expression:"ifParams.appPublicCert"}}),t("JeepayUpload",{attrs:{action:a.action,fileUrl:a.ifParams.appPublicCert},on:{uploadSuccess:function(e){return a.uploadSuccess(e,"appPublicCert")}},scopedSlots:a._u([{key:"uploadSlot",fn:function(e){var i=e.loading;return[t("a-button",{staticStyle:{marginTop:"5px"}},[t("a-icon",{attrs:{type:i?"loading":"upload"}}),a._v(" "+a._s(i?"正在上传":"点击上传")+" ")],1)]}}])})],1)],1),t("a-col",{attrs:{span:"24"}},[t("a-form-model-item",{attrs:{label:"支付宝公钥证书（.crt格式）",prop:"alipayPublicCert"}},[t("a-input",{attrs:{disabled:"disabled"},model:{value:a.ifParams.alipayPublicCert,callback:function(e){a.$set(a.ifParams,"alipayPublicCert",e)},expression:"ifParams.alipayPublicCert"}}),t("JeepayUpload",{attrs:{action:a.action,fileUrl:a.ifParams.alipayPublicCert},on:{uploadSuccess:function(e){return a.uploadSuccess(e,"alipayPublicCert")}},scopedSlots:a._u([{key:"uploadSlot",fn:function(e){var i=e.loading;return[t("a-button",{staticStyle:{marginTop:"5px"}},[t("a-icon",{attrs:{type:i?"loading":"upload"}}),a._v(" "+a._s(i?"正在上传":"点击上传")+" ")],1)]}}])})],1)],1),t("a-col",{attrs:{span:"24"}},[t("a-form-model-item",{attrs:{label:"支付宝根证书（.crt格式）",prop:"alipayRootCert"}},[t("a-input",{attrs:{disabled:"disabled"},model:{value:a.ifParams.alipayRootCert,callback:function(e){a.$set(a.ifParams,"alipayRootCert",e)},expression:"ifParams.alipayRootCert"}}),t("JeepayUpload",{attrs:{action:a.action,fileUrl:a.ifParams.alipayRootCert},on:{uploadSuccess:function(e){return a.uploadSuccess(e,"alipayRootCert")}},scopedSlots:a._u([{key:"uploadSlot",fn:function(e){var i=e.loading;return[t("a-button",{staticStyle:{marginTop:"5px"}},[t("a-icon",{attrs:{type:i?"loading":"upload"}}),a._v(" "+a._s(i?"正在上传":"点击上传")+" ")],1)]}}])})],1)],1)],1)],1),a.$access("ENT_MCH_PAY_CONFIG_ADD")?t("div",{staticClass:"drawer-btn-center"},[t("a-button",{style:{marginRight:"8px"},attrs:{icon:"close"},on:{click:a.onClose}},[a._v("取消")]),t("a-button",{attrs:{type:"primary",icon:"check",loading:a.btnLoading},on:{click:a.onSubmit}},[a._v("保存")])],1):a._e()],1)},r=[],s=(t("b64b"),t("c73b")),o=t("909a"),l=t("0fea"),n={components:{JeepayCard:s["a"],JeepayUpload:o["a"]},props:{callbackFunc:{type:Function,default:function(){return{}}}},data:function(){var a=this;return{btnLoading:!1,visible:!1,isAdd:!0,action:l["P"].cert,saveObject:{},ifParams:{},rules:{ifRate:[{required:!1,pattern:/^(([1-9]{1}\d{0,1})|(0{1}))(\.\d{1,4})?$/,message:"请输入0-100之间的数字，最多四位小数",trigger:"blur"}]},ifParamsRules:{pid:[{required:!0,message:"请输入合作伙伴身份（PID）",trigger:"blur"}],appId:[{required:!0,message:"请输入应用AppID",trigger:"blur"}],privateKey:[{trigger:"blur",validator:function(e,t,i){a.isAdd&&!t&&i(new Error("请输入应用私钥")),i()}}],alipayPublicKey:[{trigger:"blur",validator:function(e,t,i){0===a.ifParams.useCert&&a.isAdd&&!t&&i(new Error("请输入支付宝公钥")),i()}}],appPublicCert:[{trigger:"blur",validator:function(e,t,i){1!==a.ifParams.useCert||a.ifParams.appPublicCert||i(new Error("请上传应用公钥证书（.crt格式）")),i()}}],alipayPublicCert:[{trigger:"blur",validator:function(e,t,i){1!==a.ifParams.useCert||a.ifParams.alipayPublicCert||i(new Error("请上传支付宝公钥证书（.crt格式）")),i()}}],alipayRootCert:[{trigger:"blur",validator:function(e,t,i){1!==a.ifParams.useCert||a.ifParams.alipayRootCert||i(new Error("请上传支付宝根证书（.crt格式）")),i()}}]}}},methods:{show:function(a,e){void 0!==this.$refs.infoFormModel&&this.$refs.infoFormModel.resetFields(),void 0!==this.$refs.isvParamFormModel&&this.$refs.isvParamFormModel.resetFields(),this.saveObject={infoId:a,ifCode:e.ifCode,state:0===e.ifConfigState?0:1},this.ifParams={sandbox:0,signType:"RSA2",useCert:0,privateKey:"",privateKey_ph:"请输入",alipayPublicKey:"",alipayPublicKey_ph:"请输入"},this.visible=!0,this.getIsvPayConfig()},getIsvPayConfig:function(){var a=this;Object(l["z"])(a.saveObject.infoId,a.saveObject.ifCode).then((function(e){e&&e.ifParams?(a.saveObject=e,a.ifParams=JSON.parse(e.ifParams),a.ifParams.privateKey_ph=a.ifParams.privateKey,a.ifParams.privateKey="",a.ifParams.alipayPublicKey_ph=a.ifParams.alipayPublicKey,a.ifParams.alipayPublicKey="",a.isAdd=!1):void 0===e&&(a.isAdd=!0)}))},onSubmit:function(){var a=this,e=this;this.$refs.infoFormModel.validate((function(t){a.$refs.isvParamFormModel.validate((function(i){if(t&&i){e.btnLoading=!0;var r={};if(r.infoId=e.saveObject.infoId,r.ifCode=e.saveObject.ifCode,r.ifRate=e.saveObject.ifRate,r.state=e.saveObject.state,r.remark=e.saveObject.remark,0===Object.keys(e.ifParams).length)return void a.$message.error("参数不能为空！");if(e.clearEmptyKey("privateKey"),e.clearEmptyKey("alipayPublicKey"),r.ifParams=JSON.stringify(e.ifParams),0===Object.keys(r).length)return void a.$message.error("参数不能为空！");l["K"].add(l["d"],r).then((function(a){e.$message.success("保存成功"),e.visible=!1,e.btnLoading=!1,e.callbackFunc()}))}}))}))},clearEmptyKey:function(a){this.ifParams[a]||(this.ifParams[a]=void 0),this.ifParams[a+"_ph"]=void 0},uploadSuccess:function(a,e){this.ifParams[e]=a,this.$forceUpdate()},onClose:function(){this.visible=!1}}},c=n,d=t("2877"),f=Object(d["a"])(c,i,r,!1,null,"78199d34",null);e["default"]=f.exports},a655:function(a,e,t){"use strict";t("3109")}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-df8355ca"],{"0fea":function(a,t,e){"use strict";e.d(t,"I",(function(){return n})),e.d(t,"J",(function(){return i})),e.d(t,"k",(function(){return s})),e.d(t,"j",(function(){return o})),e.d(t,"l",(function(){return u})),e.d(t,"n",(function(){return l})),e.d(t,"d",(function(){return d})),e.d(t,"h",(function(){return p})),e.d(t,"p",(function(){return f})),e.d(t,"a",(function(){return m})),e.d(t,"o",(function(){return h})),e.d(t,"i",(function(){return y})),e.d(t,"e",(function(){return b})),e.d(t,"f",(function(){return v})),e.d(t,"m",(function(){return P})),e.d(t,"c",(function(){return g})),e.d(t,"b",(function(){return C})),e.d(t,"g",(function(){return T})),e.d(t,"O",(function(){return x})),e.d(t,"t",(function(){return _})),e.d(t,"L",(function(){return S})),e.d(t,"w",(function(){return O})),e.d(t,"E",(function(){return k})),e.d(t,"F",(function(){return E})),e.d(t,"r",(function(){return w})),e.d(t,"y",(function(){return q})),e.d(t,"x",(function(){return A})),e.d(t,"z",(function(){return R})),e.d(t,"A",(function(){return $})),e.d(t,"v",(function(){return K})),e.d(t,"N",(function(){return j})),e.d(t,"M",(function(){return I})),e.d(t,"B",(function(){return F})),e.d(t,"C",(function(){return U})),e.d(t,"G",(function(){return G})),e.d(t,"H",(function(){return L})),e.d(t,"s",(function(){return M})),e.d(t,"q",(function(){return J})),e.d(t,"u",(function(){return N})),e.d(t,"D",(function(){return B})),e.d(t,"K",(function(){return D}));e("2ca0"),e("ac1f"),e("5319");var r=e("4667"),n={list:function(a,t){return r["a"].request({url:a,method:"GET",params:t},!0,!0,!1)},add:function(a,t){return r["a"].request({url:a,method:"POST",data:t},!0,!0,!1)},getById:function(a,t){return r["a"].request({url:a+"/"+t,method:"GET"},!0,!0,!1)},updateById:function(a,t,e){return r["a"].request({url:a+"/"+t,method:"PUT",data:e},!0,!0,!1)},delById:function(a,t){return r["a"].request({url:a+"/"+t,method:"DELETE"},!0,!0,!1)}},i={list:function(a,t){return r["a"].request({url:a,method:"GET",params:t},!0,!0,!0)},add:function(a,t){return r["a"].request({url:a,method:"POST",data:t},!0,!0,!0)},getById:function(a,t){return r["a"].request({url:a+"/"+t,method:"GET"},!0,!0,!0)},updateById:function(a,t,e){return r["a"].request({url:a+"/"+t,method:"PUT",data:e},!0,!0,!0)},delById:function(a,t){return r["a"].request({url:a+"/"+t,method:"DELETE"},!0,!0,!0)}},s="/api/sysRoles",o="/api/sysRoleEntRelas",u="/api/sysUsers",l="/api/sysUserRoleRelas",c="api/mainChart",d="/api/mchApps",p="/api/payOrder",f="/api/withDrawOrder",m="/api/mainChart/balance",h="/api/withDrawOrder/create",y="/api/refundOrder",b="/api/mch/payConfigs",v="/api/mch/payPassages",P="/api/transferOrders",g="/api/divisionReceiverGroups",C="/api/divisionReceivers",T="/api/division/records",x={avatar:r["a"].baseUrl+"/api/ossFiles/avatar",cert:r["a"].baseUrl+"/api/ossFiles/cert"};function _(){return r["a"].request({url:"/api/sysEnts/showTree",method:"GET"})}function S(a,t){return r["a"].request({url:"api/sysUserRoleRelas/relas/"+a,method:"POST",data:{roleIdListStr:JSON.stringify(t)}})}function O(a,t){return r["a"].request({url:"/api/mch/payConfigs/"+a+"/"+t,method:"get"})}function k(a){return r["a"].request({url:"api/paytest/payways/"+a,method:"GET"})}function E(a){return r["a"].request({url:"/api/paytest/payOrders",method:"POST",data:a})}function w(a,t){return r["a"].request({url:"/api/mch/payPassages/availablePayInterface/"+a+"/"+t,method:"GET"})}function q(){return r["a"].request({url:c+"/payAmountWeek",method:"GET"})}function A(){return r["a"].request({url:c+"/numCount",method:"GET"})}function R(a){return r["a"].request({url:c+"/payCount",method:"GET",params:a})}function $(a){return r["a"].request({url:c+"/payTypeCount",method:"GET",params:a})}function K(){return r["a"].request({url:c,method:"GET"})}function j(a){return r["a"].request({url:"/api/current/modifyPwd",method:"put",data:a})}function I(a){return r["a"].request({url:"/api/current/user",method:"put",data:a})}function F(){return r["a"].request({url:"/api/current/user",method:"get"})}function U(){var a=document.location.protocol+"//"+document.location.host;return a.startsWith("https:")?"wss://"+a.replace("https://",""):"ws://"+a.replace("http://","")}function G(a){return r["a"].request({url:"/api/mch/payConfigs/alipayIsvsubMchAuthUrls/"+a,method:"GET"})}function L(a){return r["a"].request({url:"api/mchTransfers/ifCodes/"+a,method:"GET"})}function M(a,t,e){return r["a"].request({url:"/api/mchTransfers/channelUserId",method:"GET",params:{ifCode:a,appId:t,extParam:e}})}function J(a){return r["a"].request({url:"/api/mchTransfers/doTransfer",method:"POST",data:a},!0,!0,!0)}function N(a){return r["a"].request({url:"/api/mch/payConfigs/ifCodes/"+a,method:"GET"},!0,!0,!0)}function B(a,t,e){return r["a"].request({url:"/api/payOrder/refunds/"+a,method:"POST",data:{refundAmount:t,refundReason:e}})}function D(a){return r["a"].request({url:"/api/division/records/resend/"+a,method:"POST"})}},"4a76":function(a,t,e){"use strict";e("892a")},"892a":function(a,t,e){},"909a":function(a,t,e){"use strict";var r=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",[e("a-upload",{attrs:{name:"file",action:a.action,headers:a.headers,showUploadList:!1,multiple:!0,"before-upload":a.beforeUpload},on:{change:a.handleChange}},[a._t("uploadSlot",null,{loading:a.loading})],2)],1)},n=[],i=(e("a9e3"),e("381c")),s=e("ffef");function o(){var a={};return a[i["b"].ACCESS_TOKEN_NAME]=s["a"].getToken(),a}var u={name:"JeepayUpload",props:{action:{type:String,default:""},size:{type:Number,default:10},num:{type:Number,default:1}},data:function(){return{loading:!1,fileList:[],headers:o()}},created:function(){},methods:{handleChange:function(a){"uploading"===a.file.status&&(this.loading=!0),"done"===a.file.status?(this.loading=!1,this.$emit("uploadSuccess",a.file.response.data)):"error"===a.file.status&&this.$message.error("上传失败")},beforeUpload:function(a){var t=a.size/1024/1024<this.size;return t||this.$message.error("文件应小于"+this.size+"M!"),t}}},l=u,c=e("2877"),d=Object(c["a"])(l,r,n,!1,null,null,null);t["a"]=d.exports},a923:function(a,t,e){"use strict";e.r(t);var r=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("a-drawer",{attrs:{title:"填写参数",width:"40%",closable:!0,maskClosable:!1,visible:a.visible,"body-style":{paddingBottom:"80px"}},on:{close:a.onClose}},[e("a-form-model",{ref:"infoFormModel",attrs:{model:a.saveObject,layout:"vertical",rules:a.rules}},[e("a-row",{attrs:{gutter:16}},[e("a-col",{attrs:{span:12}},[e("a-form-model-item",{attrs:{label:"状态",prop:"state"}},[e("a-radio-group",{model:{value:a.saveObject.state,callback:function(t){a.$set(a.saveObject,"state",t)},expression:"saveObject.state"}},[e("a-radio",{attrs:{value:1}},[a._v(" 启用 ")]),e("a-radio",{attrs:{value:0}},[a._v(" 停用 ")])],1)],1)],1),e("a-col",{attrs:{span:24}},[e("a-form-model-item",{attrs:{label:"备注",prop:"remark"}},[e("a-input",{attrs:{placeholder:"请输入",type:"textarea"},model:{value:a.saveObject.remark,callback:function(t){a.$set(a.saveObject,"remark",t)},expression:"saveObject.remark"}})],1)],1)],1)],1),e("a-divider",{attrs:{orientation:"left"}},[e("a-tag",{attrs:{color:"#FF4B33"}},[a._v(" "+a._s(a.saveObject.ifCode)+" 商户参数配置 ")])],1),e("a-form-model",{ref:"mchParamFormModel",attrs:{model:a.ifParams,layout:"vertical",rules:a.ifParamsRules}},[1===a.mchType?e("a-row",{attrs:{gutter:16}},[e("a-col",{attrs:{span:"12"}},[e("a-form-model-item",{attrs:{label:"环境配置",prop:"sandbox"}},[e("a-radio-group",{model:{value:a.ifParams.sandbox,callback:function(t){a.$set(a.ifParams,"sandbox",t)},expression:"ifParams.sandbox"}},[e("a-radio",{attrs:{value:1}},[a._v("沙箱环境")]),e("a-radio",{attrs:{value:0}},[a._v("生产环境")])],1)],1)],1),e("a-col",{attrs:{span:"12"}},[e("a-form-model-item",{attrs:{label:"应用AppID",prop:"appId"}},[e("a-input",{attrs:{placeholder:"请输入"},model:{value:a.ifParams.appId,callback:function(t){a.$set(a.ifParams,"appId",t)},expression:"ifParams.appId"}})],1)],1),e("a-col",{attrs:{span:"24"}},[e("a-form-model-item",{attrs:{label:"应用私钥",prop:"privateKey"}},[e("a-input",{attrs:{placeholder:a.ifParams.privateKey_ph,type:"textarea"},model:{value:a.ifParams.privateKey,callback:function(t){a.$set(a.ifParams,"privateKey",t)},expression:"ifParams.privateKey"}})],1)],1),e("a-col",{attrs:{span:"24"}},[e("a-form-model-item",{attrs:{label:"支付宝公钥",prop:"alipayPublicKey"}},[e("a-input",{attrs:{placeholder:a.ifParams.alipayPublicKey_ph,type:"textarea"},model:{value:a.ifParams.alipayPublicKey,callback:function(t){a.$set(a.ifParams,"alipayPublicKey",t)},expression:"ifParams.alipayPublicKey"}})],1)],1),e("a-col",{attrs:{span:"12"}},[e("a-form-model-item",{attrs:{label:"接口签名方式(推荐使用RSA2)",prop:"signType"}},[e("a-radio-group",{attrs:{defaultValue:"RSA"},model:{value:a.ifParams.signType,callback:function(t){a.$set(a.ifParams,"signType",t)},expression:"ifParams.signType"}},[e("a-radio",{attrs:{value:"RSA"}},[a._v("RSA")]),e("a-radio",{attrs:{value:"RSA2"}},[a._v("RSA2")])],1)],1)],1),e("a-col",{attrs:{span:"12"}},[e("a-form-model-item",{attrs:{label:"公钥证书",prop:"useCert"}},[e("a-radio-group",{attrs:{defaultValue:"1"},model:{value:a.ifParams.useCert,callback:function(t){a.$set(a.ifParams,"useCert",t)},expression:"ifParams.useCert"}},[e("a-radio",{attrs:{value:1}},[a._v("使用证书（请使用RSA2私钥）")]),e("a-radio",{attrs:{value:0}},[a._v("不使用证书")])],1)],1)],1),e("a-col",{attrs:{span:"24"}},[e("a-form-model-item",{attrs:{label:"应用公钥证书（.crt格式）",prop:"appPublicCert"}},[e("a-input",{attrs:{disabled:"disabled"},model:{value:a.ifParams.appPublicCert,callback:function(t){a.$set(a.ifParams,"appPublicCert",t)},expression:"ifParams.appPublicCert"}}),e("JeepayUpload",{attrs:{action:a.action,fileUrl:a.ifParams.appPublicCert},on:{uploadSuccess:function(t){return a.uploadSuccess(t,"appPublicCert")}},scopedSlots:a._u([{key:"uploadSlot",fn:function(t){var r=t.loading;return[e("a-button",{staticStyle:{marginTop:"5px"}},[e("a-icon",{attrs:{type:r?"loading":"upload"}}),a._v(" "+a._s(r?"正在上传":"点击上传")+" ")],1)]}}],null,!1,1271385614)})],1)],1),e("a-col",{attrs:{span:"24"}},[e("a-form-model-item",{attrs:{label:"支付宝公钥证书（.crt格式）",prop:"alipayPublicCert"}},[e("a-input",{attrs:{disabled:"disabled"},model:{value:a.ifParams.alipayPublicCert,callback:function(t){a.$set(a.ifParams,"alipayPublicCert",t)},expression:"ifParams.alipayPublicCert"}}),e("JeepayUpload",{attrs:{action:a.action,fileUrl:a.ifParams.alipayPublicCert},on:{uploadSuccess:function(t){return a.uploadSuccess(t,"alipayPublicCert")}},scopedSlots:a._u([{key:"uploadSlot",fn:function(t){var r=t.loading;return[e("a-button",{staticStyle:{marginTop:"5px"}},[e("a-icon",{attrs:{type:r?"loading":"upload"}}),a._v(" "+a._s(r?"正在上传":"点击上传")+" ")],1)]}}],null,!1,1271385614)})],1)],1),e("a-col",{attrs:{span:"24"}},[e("a-form-model-item",{attrs:{label:"支付宝根证书（.crt格式）",prop:"alipayRootCert"}},[e("a-input",{attrs:{disabled:"disabled"},model:{value:a.ifParams.alipayRootCert,callback:function(t){a.$set(a.ifParams,"alipayRootCert",t)},expression:"ifParams.alipayRootCert"}}),e("JeepayUpload",{attrs:{action:a.action,fileUrl:a.ifParams.alipayRootCert},on:{uploadSuccess:function(t){return a.uploadSuccess(t,"alipayRootCert")}},scopedSlots:a._u([{key:"uploadSlot",fn:function(t){var r=t.loading;return[e("a-button",{staticStyle:{marginTop:"5px"}},[e("a-icon",{attrs:{type:r?"loading":"upload"}}),a._v(" "+a._s(r?"正在上传":"点击上传")+" ")],1)]}}],null,!1,1271385614)})],1)],1)],1):2===a.mchType?e("a-row",{attrs:{gutter:16}},[e("a-col",{attrs:{span:"12"}},[e("a-form-model-item",{attrs:{label:"子商户app_auth_token",prop:"appAuthToken"}},[e("a-input",{attrs:{placeholder:"请输入子商户app_auth_token"},model:{value:a.ifParams.appAuthToken,callback:function(t){a.$set(a.ifParams,"appAuthToken",t)},expression:"ifParams.appAuthToken"}})],1)],1)],1):a._e()],1),a.$access("ENT_MCH_PAY_CONFIG_ADD")?e("div",{staticClass:"drawer-btn-center"},[e("a-button",{style:{marginRight:"8px"},attrs:{icon:"close"},on:{click:a.onClose}},[a._v("取消")]),e("a-button",{attrs:{type:"primary",icon:"check",loading:a.btnLoading},on:{click:a.onSubmit}},[a._v("保存")])],1):a._e()],1)},n=[],i=(e("b64b"),e("c73b")),s=e("909a"),o=e("0fea"),u={components:{JeepayCard:i["a"],JeepayUpload:s["a"]},props:{callbackFunc:{type:Function,default:function(){return{}}}},data:function(){var a=this;return{btnLoading:!1,visible:!1,isAdd:!0,mchType:1,action:o["O"].cert,saveObject:{},ifParams:{},rules:{},ifParamsRules:{appId:[{trigger:"blur",validator:function(t,e,r){1!==a.mchType||e||r(new Error("请输入应用AppID")),r()}}],privateKey:[{trigger:"blur",validator:function(t,e,r){1===a.mchType&&a.isAdd&&!e&&r(new Error("请输入应用私钥")),r()}}],alipayPublicKey:[{trigger:"blur",validator:function(t,e,r){1===a.mchType&&a.isAdd&&0===a.ifParams.useCert&&!e&&r(new Error("请输入支付宝公钥")),r()}}],appPublicCert:[{trigger:"blur",validator:function(t,e,r){1!==a.mchType||1!==a.ifParams.useCert||a.ifParams.appPublicCert||r(new Error("请上传应用公钥证书（.crt格式）")),r()}}],alipayPublicCert:[{trigger:"blur",validator:function(t,e,r){1!==a.mchType||1!==a.ifParams.useCert||a.ifParams.alipayPublicCert||r(new Error("请上传支付宝公钥证书（.crt格式）")),r()}}],alipayRootCert:[{trigger:"blur",validator:function(t,e,r){1!==a.mchType||1!==a.ifParams.useCert||a.ifParams.alipayRootCert||r(new Error("请上传支付宝根证书（.crt格式）")),r()}}],appAuthToken:[{trigger:"blur",validator:function(t,e,r){2!==a.mchType||e||r(new Error("请输入子商户app_auth_token")),r()}}]}}},methods:{show:function(a,t){void 0!==this.$refs.infoFormModel&&this.$refs.infoFormModel.resetFields(),void 0!==this.$refs.mchParamFormModel&&this.$refs.mchParamFormModel.resetFields(),this.mchType=t.mchType,this.saveObject={infoId:a,ifCode:t.ifCode,state:0===t.ifConfigState?0:1},this.ifParams={sandbox:0,signType:"RSA2",useCert:0,privateKey:"",privateKey_ph:"请输入",alipayPublicKey:"",alipayPublicKey_ph:"请输入",appPublicCert:"",alipayPublicCert:"",alipayRootCert:""},this.visible=!0,this.getMchPayConfig()},getMchPayConfig:function(){var a=this;Object(o["w"])(a.saveObject.infoId,a.saveObject.ifCode).then((function(t){t&&t.ifParams?(a.saveObject=t,a.ifParams=JSON.parse(t.ifParams),a.ifParams.privateKey_ph=a.ifParams.privateKey,a.ifParams.privateKey="",a.ifParams.alipayPublicKey_ph=a.ifParams.alipayPublicKey,a.ifParams.alipayPublicKey="",a.isAdd=!1):void 0===t&&(a.isAdd=!0)}))},onSubmit:function(){var a=this,t=this;this.$refs.infoFormModel.validate((function(e){a.$refs.mchParamFormModel.validate((function(r){if(e&&r){t.btnLoading=!0;var n={};if(n.infoId=t.saveObject.infoId,n.ifCode=t.saveObject.ifCode,n.state=t.saveObject.state,n.remark=t.saveObject.remark,0===Object.keys(t.ifParams).length)return void a.$message.error("参数不能为空！");if(t.clearEmptyKey("privateKey"),t.clearEmptyKey("alipayPublicKey"),n.ifParams=JSON.stringify(t.ifParams),0===Object.keys(n).length)return void a.$message.error("参数不能为空！");o["I"].add(o["e"],n).then((function(a){t.$message.success("保存成功"),t.visible=!1,t.btnLoading=!1,t.callbackFunc()}))}}))}))},clearEmptyKey:function(a){this.ifParams[a]||(this.ifParams[a]=void 0),this.ifParams[a+"_ph"]=void 0},uploadSuccess:function(a,t){this.ifParams[t]=a,this.$forceUpdate()},onClose:function(){this.visible=!1}}},l=u,c=e("2877"),d=Object(c["a"])(l,r,n,!1,null,"7de500bd",null);t["default"]=d.exports},c73b:function(a,t,e){"use strict";var r=function(){var a=this,t=a.$createElement,r=a._self._c||t;return r("div",[r("a-row",{staticStyle:{width:"100%"},attrs:{gutter:[24,24]}},[a.addAuthority?r("a-col",{attrs:{xxl:24/a.span.xxl,xl:24/a.span.xl,lg:24/a.span.lg,md:24/a.span.md,sm:24/a.span.sm,xs:24/a.span.xs},on:{click:function(t){return a.$emit("addJeepayCard")}}},[r("div",{staticClass:"jeepay-card-add",style:{height:a.height+"px"}},[r("img",{style:{width:a.height/3+"px",height:a.height/3+"px"},attrs:{src:e("e8c7"),alt:"add-icon"}}),r("div",{staticClass:"jeepay-card-add-text"},[a._v(" 新建"+a._s(a.name)+" ")])])]):a._e(),a._l(a.cardList,(function(t,e){return r("a-col",{key:e,attrs:{xxl:24/a.span.xxl,xl:24/a.span.xl,lg:24/a.span.lg,md:24/a.span.md,sm:24/a.span.sm,xs:24/a.span.xs}},[a._t("cardContentSlot",null,{record:t}),a._t("cardOpSlot",null,{record:t})],2)}))],2)],1)},n=[],i=(e("a9e3"),{name:"JeepayCard",props:{span:{type:Object,default:function(){return{xxl:6,xl:4,lg:4,md:3,sm:2,xs:1}}},height:{type:Number,default:200},name:{type:String,default:""},addAuthority:{type:Boolean,default:!1},reqCardListFunc:{type:Function,default:function(){return function(){return{}}}}},data:function(){return{cardList:[]}},created:function(){this.refCardList()},methods:{refCardList:function(){var a=this;this.reqCardListFunc().then((function(t){a.cardList=t}))}}}),s=i,o=(e("4a76"),e("2877")),u=Object(o["a"])(s,r,n,!1,null,"689f62ad",null);t["a"]=u.exports},e8c7:function(a,t,e){a.exports=e.p+"assets/add-icon.a2f73e90.svg"}}]);
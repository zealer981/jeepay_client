(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3867bb44"],{"30b1":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=this,a=t.$createElement,s=t._self._c||a;return s("page-header-wrapper",[s("a-card",[s("div",{staticClass:"table-page-search-wrapper"},[s("a-form",{staticClass:"table-head-ground",attrs:{layout:"inline"}},[s("div",{staticClass:"table-layer"},[s("jeepay-text-up",{attrs:{placeholder:"应用AppId",msg:t.searchData.appId},model:{value:t.searchData.appId,callback:function(e){t.$set(t.searchData,"appId",e)},expression:"searchData.appId"}}),s("jeepay-text-up",{attrs:{placeholder:"应用名称",msg:t.searchData.appName},model:{value:t.searchData.appName,callback:function(e){t.$set(t.searchData,"appName",e)},expression:"searchData.appName"}}),s("a-form-item",{staticClass:"table-head-layout",attrs:{label:""}},[s("a-select",{attrs:{placeholder:"状态","default-value":""},model:{value:t.searchData.state,callback:function(e){t.$set(t.searchData,"state",e)},expression:"searchData.state"}},[s("a-select-option",{attrs:{value:""}},[t._v("全部")]),s("a-select-option",{attrs:{value:"0"}},[t._v("禁用")]),s("a-select-option",{attrs:{value:"1"}},[t._v("启用")])],1)],1),s("span",{staticClass:"table-page-search-submitButtons",staticStyle:{"flex-grow":"0","flex-shrink":"0"}},[s("a-button",{attrs:{type:"primary",icon:"search",loading:t.btnLoading},on:{click:t.queryFunc}},[t._v("查询")]),s("a-button",{staticStyle:{"margin-left":"8px"},attrs:{icon:"reload"},on:{click:function(){return e.searchData={}}}},[t._v("重置")])],1)],1)]),s("div",[t.$access("ENT_MCH_APP_ADD")?s("a-button",{staticClass:"mg-b-30",attrs:{type:"primary",icon:"plus"},on:{click:t.addFunc}},[t._v("新建")]):t._e()],1)],1),s("JeepayTable",{ref:"infoTable",attrs:{initData:!0,reqTableDataFunc:t.reqTableDataFunc,tableColumns:t.tableColumns,searchData:t.searchData,rowKey:"appId"},on:{btnLoadClose:function(e){t.btnLoading=!1}},scopedSlots:t._u([{key:"appIdSlot",fn:function(e){var a=e.record;return[s("b",[t._v(t._s(a.appId))])]}},{key:"stateSlot",fn:function(e){var t=e.record;return[s("a-badge",{attrs:{status:0===t.state?"error":"processing",text:0===t.state?"禁用":"启用"}})]}},{key:"opSlot",fn:function(e){var a=e.record;return[s("JeepayTableColumns",[t.$access("ENT_MCH_APP_EDIT")?s("a-button",{attrs:{type:"link"},on:{click:function(e){return t.editFunc(a.appId)}}},[t._v("修改")]):t._e(),t.$access("ENT_MCH_PAY_CONFIG_LIST")?s("a-button",{attrs:{type:"link"},on:{click:function(e){return t.showPayIfConfigList(a.appId)}}},[t._v("支付配置")]):t._e(),t.$access("ENT_MCH_PAY_TEST")?s("a-button",{attrs:{type:"link"}},[s("router-link",{attrs:{to:{name:"ENT_MCH_PAY_TEST",params:{appId:a.appId}}}},[t._v(" 支付测试 ")])],1):t._e(),t.$access("ENT_MCH_TRANSFER")?s("a-button",{attrs:{type:"link"}},[s("router-link",{attrs:{to:{name:"ENT_MCH_TRANSFER",params:{appId:a.appId}}}},[t._v(" 发起转账 ")])],1):t._e(),t.$access("ENT_MCH_APP_DEL")?s("a-button",{staticStyle:{color:"red"},attrs:{type:"link"},on:{click:function(e){return t.delFunc(a.appId)}}},[t._v("删除")]):t._e()],1)]}}])})],1),s("MchAppAddOrEdit",{ref:"mchAppAddOrEdit",attrs:{callbackFunc:t.searchFunc}}),s("MchPayIfConfigList",{ref:"mchPayIfConfigList"})],1)},r=[],n=a("f339"),c=a("4f53"),o=a("5d5e"),i=a("0fea"),l=a("5071"),p=a("0ed0"),d=[{key:"appId",fixed:"left",width:"320px",title:"应用AppId",scopedSlots:{customRender:"appIdSlot"}},{key:"appName",title:"应用名称",dataIndex:"appName"},{key:"state",title:"状态",scopedSlots:{customRender:"stateSlot"}},{key:"createdAt",dataIndex:"createdAt",title:"创建日期"},{key:"op",title:"操作",width:"260px",fixed:"right",align:"center",scopedSlots:{customRender:"opSlot"}}],u={name:"MchAppPage",components:{JeepayTable:n["a"],JeepayTableColumns:o["a"],JeepayTextUp:c["a"],MchAppAddOrEdit:l["default"],MchPayIfConfigList:p["default"]},data:function(){return{btnLoading:!1,tableColumns:d,searchData:{}}},methods:{queryFunc:function(){this.btnLoading=!0,this.$refs.infoTable.refTable(!0)},reqTableDataFunc:function(e){return i["I"].list(i["d"],e)},searchFunc:function(){this.$refs.infoTable.refTable(!0)},addFunc:function(){this.$refs.mchAppAddOrEdit.show()},editFunc:function(e){this.$refs.mchAppAddOrEdit.show(e)},delFunc:function(e){var t=this;this.$infoBox.confirmDanger("确认删除？","",(function(){i["I"].delById(i["d"],e).then((function(e){t.$message.success("删除成功！"),t.searchFunc()}))}))},showPayIfConfigList:function(e){this.$refs.mchPayIfConfigList.show(e)}}},f=u,b=a("2877"),m=Object(b["a"])(f,s,r,!1,null,"31f8372a",null);t["default"]=m.exports},"4f53":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"jee-text-up"},[a("a-input",{attrs:{required:"required",value:e.msg},on:{input:function(t){return e.$emit("input",t.target.value)}}}),a("label",[e._v(e._s(e.placeholder))])],1)},r=[],n={name:"JeepayTextUp",props:{msg:{type:String},placeholder:{type:String}}},c=n,o=(a("a72a"),a("2877")),i=Object(o["a"])(c,s,r,!1,null,"4d207278",null);t["a"]=i.exports},5071:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-drawer",{attrs:{visible:e.visible,title:e.isAdd?"新增应用":"修改应用",width:"40%",maskClosable:!1},on:{close:e.onClose}},[a("a-form-model",{ref:"infoFormModel",attrs:{model:e.saveObject,layout:"vertical",rules:e.rules}},[a("a-row",{attrs:{gutter:16}},[e.isAdd?e._e():a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"应用 AppId",prop:"appId"}},[a("a-input",{attrs:{placeholder:"请输入",disabled:!e.isAdd},model:{value:e.saveObject.appId,callback:function(t){e.$set(e.saveObject,"appId",t)},expression:"saveObject.appId"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"应用名称",prop:"appName"}},[a("a-input",{attrs:{placeholder:"请输入"},model:{value:e.saveObject.appName,callback:function(t){e.$set(e.saveObject,"appName",t)},expression:"saveObject.appName"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"状态",prop:"state"}},[a("a-radio-group",{model:{value:e.saveObject.state,callback:function(t){e.$set(e.saveObject,"state",t)},expression:"saveObject.state"}},[a("a-radio",{attrs:{value:1}},[e._v(" 启用 ")]),a("a-radio",{attrs:{value:0}},[e._v(" 停用 ")])],1)],1)],1),a("a-col",{attrs:{span:24}},[a("a-form-model-item",{attrs:{label:"私钥 AppSecret",prop:"appSecret"}},[a("a-input",{attrs:{placeholder:e.saveObject.appSecret_ph,type:"textarea"},model:{value:e.saveObject.appSecret,callback:function(t){e.$set(e.saveObject,"appSecret",t)},expression:"saveObject.appSecret"}}),a("a-button",{attrs:{type:"primary",ghost:""},on:{click:function(t){return e.randomKey(!1,128,0)}}},[a("a-icon",{attrs:{type:"file-sync"}}),e._v("随机生成私钥")],1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"备注",prop:"remark"}},[a("a-input",{attrs:{placeholder:"请输入"},model:{value:e.saveObject.remark,callback:function(t){e.$set(e.saveObject,"remark",t)},expression:"saveObject.remark"}})],1)],1)],1)],1),a("div",{staticClass:"drawer-btn-center"},[a("a-button",{style:{marginRight:"8px"},attrs:{icon:"close"},on:{click:e.onClose}},[e._v("取消")]),a("a-button",{attrs:{type:"primary",icon:"check"},on:{click:e.onSubmit}},[e._v("保存")])],1)],1)},r=[],n=a("0fea"),c={props:{callbackFunc:{type:Function,default:function(){return function(){return{}}}}},data:function(){return{isAdd:!0,visible:!1,appId:"",saveObject:{},rules:{appName:[{required:!0,message:"请输入应用名称",trigger:"blur"}]}}},methods:{show:function(e){this.isAdd=!e,this.saveObject={state:1,appSecret:"",appSecret_ph:"请输入"},void 0!==this.$refs.infoFormModel&&this.$refs.infoFormModel.resetFields();var t=this;t.rules.appSecret=[],this.isAdd?(t.rules.appSecret.push({required:!0,message:"请输入私钥或点击随机生成私钥",trigger:"blur"}),t.visible=!0):(t.appId=e,n["I"].getById(n["d"],e).then((function(e){t.saveObject=e,t.saveObject.appSecret_ph=e.appSecret,t.saveObject.appSecret=""})),this.visible=!0)},onSubmit:function(){var e=this;this.$refs.infoFormModel.validate((function(t){t&&(delete e.saveObject.appSecret_ph,e.isAdd?n["I"].add(n["d"],e.saveObject).then((function(t){e.$message.success("新增成功"),e.visible=!1,e.callbackFunc()})):(""===e.saveObject.appSecret&&delete e.saveObject.appSecret,n["I"].updateById(n["d"],e.appId,e.saveObject).then((function(t){e.$message.success("修改成功"),e.visible=!1,e.callbackFunc()}))))}))},randomKey:function(e,t,a){var s="",r=t,n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];e&&(r=Math.round(Math.random()*(a-t))+t);for(var c=0;c<r;c++){var o=Math.round(Math.random()*(n.length-1));s+=n[o]}this.saveObject.appSecret=s},onClose:function(){this.visible=!1}}},o=c,i=a("2877"),l=Object(i["a"])(o,s,r,!1,null,"0e67a9c0",null);t["default"]=l.exports},a72a:function(e,t,a){"use strict";a("de7e")},de7e:function(e,t,a){}}]);
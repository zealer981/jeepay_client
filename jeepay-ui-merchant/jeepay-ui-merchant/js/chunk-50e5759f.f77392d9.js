(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-50e5759f","chunk-64062e0b"],{"27fc":function(e,t,a){},44423:function(e,t,a){"use strict";a("aa30")},"4f53":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"jee-text-up"},[a("a-input",{attrs:{required:"required",value:e.msg},on:{input:function(t){return e.$emit("input",t.target.value)}}}),a("label",[e._v(e._s(e.placeholder))])],1)},i=[],o={name:"JeepayTextUp",props:{msg:{type:String},placeholder:{type:String}}},n=o,c=(a("a72a"),a("2877")),s=Object(c["a"])(n,r,i,!1,null,"4d207278",null);t["a"]=s.exports},"5d5e":function(e,t,a){"use strict";a("d81d");var r,i,o={name:"JeepayTableColumns",render:function(e,t){var a=arguments[0],r=[];if(this.$slots.default.map((function(e){return e.tag&&r.push(e),!1})),r.length<=3)return e("div",{style:"display:flex; justify-content: space-evenly;"},r);for(var i=[r[0],r[1]],o=[],n=2;n<r.length;n++)o.push(a("a-menu-item",[r[n]]));return a("div",{style:"display:flex; justify-content: space-evenly;"},[" ",i,a("a-dropdown",[a("a-button",{style:"",attrs:{type:"link"},class:"ant-dropdown-link"},["更多",a("a-icon",{attrs:{type:"down"}})]),a("a-menu",{slot:"overlay"},[o])])])}},n=o,c=(a("44423"),a("2877")),s=Object(c["a"])(n,r,i,!1,null,"207fd926",null);t["a"]=s.exports},a72a:function(e,t,a){"use strict";a("de7e")},aa30:function(e,t,a){},ab92:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-drawer",{attrs:{visible:e.isShow,title:"修改分账用户信息",width:"30%",maskClosable:!1},on:{close:function(t){e.isShow=!1}}},[a("a-form-model",{ref:"infoFormModel",attrs:{model:e.saveObject,"label-col":{span:6},"wrapper-col":{span:15},rules:e.rules}},[a("a-form-model-item",{attrs:{label:"账号别名：",prop:"receiverAlias"}},[a("a-input",{model:{value:e.saveObject.receiverAlias,callback:function(t){e.$set(e.saveObject,"receiverAlias",t)},expression:"saveObject.receiverAlias"}})],1),a("a-form-model-item",{attrs:{label:"默认分账比例：",prop:"divisionProfit"}},[a("a-input",{staticStyle:{width:"100px"},model:{value:e.saveObject.divisionProfit,callback:function(t){e.$set(e.saveObject,"divisionProfit",t)},expression:"saveObject.divisionProfit"}}),e._v(" % ")],1),a("a-form-model-item",{attrs:{label:"状态",prop:"state"}},[a("a-radio-group",{model:{value:e.saveObject.state,callback:function(t){e.$set(e.saveObject,"state",t)},expression:"saveObject.state"}},[a("a-radio",{attrs:{value:1}},[e._v("正常分账")]),e._v(" "),a("a-radio",{attrs:{value:0}},[e._v("暂停分账")])],1)],1),a("a-form-model-item",{attrs:{label:"分组变更：",prop:"receiverGroupId"}},[a("a-select",{staticStyle:{width:"210px"},attrs:{placeholder:"账号分组"},model:{value:e.saveObject.receiverGroupId,callback:function(t){e.$set(e.saveObject,"receiverGroupId",t)},expression:"saveObject.receiverGroupId"}},e._l(e.allReceiverGroup,(function(t){return a("a-select-option",{key:t.receiverGroupId,attrs:{value:t.receiverGroupId}},[e._v(e._s(t.receiverGroupName))])})),1)],1)],1),a("div",{staticClass:"drawer-btn-center"},[a("a-button",{style:{marginRight:"8px"},attrs:{icon:"close"},on:{click:function(t){e.isShow=!1}}},[e._v("取消")]),a("a-button",{attrs:{type:"primary",loading:e.confirmLoading,icon:"check"},on:{click:e.handleOkFunc}},[e._v("保存")])],1)],1)},i=[],o=(a("b680"),a("0fea")),n={props:{callbackFunc:{type:Function}},data:function(){return{confirmLoading:!1,isShow:!1,saveObject:{},recordId:null,allReceiverGroup:[],rules:{receiverAlias:[{required:!0,message:"请输入别名",trigger:"blur"}],receiverGroupId:[{required:!0,message:"请选择分组",trigger:"blur"}],divisionProfit:[{required:!0,message:"请录入默认分账比例",trigger:"blur"}],state:[{required:!0,message:"请选择状态",trigger:"blur"}]}}},created:function(){},methods:{show:function(e){this.saveObject={},this.confirmLoading=!1,void 0!==this.$refs.infoFormModel&&this.$refs.infoFormModel.resetFields();var t=this;t.recordId=e,o["I"].getById(o["b"],e).then((function(e){e.divisionProfit=(100*e.divisionProfit).toFixed(2),t.saveObject=e})),o["I"].list(o["c"],{pageSize:-1}).then((function(e){t.allReceiverGroup=e.records})),this.isShow=!0},handleOkFunc:function(){var e=this;this.$refs.infoFormModel.validate((function(t){if(t){e.confirmLoading=!0;var a={receiverAlias:e.saveObject.receiverAlias,receiverGroupId:e.saveObject.receiverGroupId,divisionProfit:e.saveObject.divisionProfit,state:e.saveObject.state};o["I"].updateById(o["b"],e.recordId,a).then((function(t){e.$message.success("修改成功"),e.isShow=!1,e.callbackFunc()})).catch((function(t){e.confirmLoading=!1}))}}))}}},c=n,s=a("2877"),l=Object(s["a"])(c,r,i,!1,null,null,null);t["default"]=l.exports},ca00:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return o}));var r=1;function i(){var e=new Date,t=e.getHours();return t<9?"早上好":t<=11?"上午好":t<=13?"中午好":t<20?"下午好":"晚上好"}function o(){return(new Date).getTime()+"_"+r++}},d035:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=this,a=t.$createElement,r=t._self._c||a;return r("page-header-wrapper",[r("a-card",[t.$access("ENT_DIVISION_RECEIVER_LIST")?r("div",{staticClass:"table-page-search-wrapper"},[r("a-form",{staticClass:"table-head-ground",attrs:{layout:"inline"}},[r("div",{staticClass:"table-layer"},[r("a-form-item",{staticClass:"table-head-layout",attrs:{label:"","wrapper-col":{span:16}}},[r("a-select",{attrs:{placeholder:"选择应用"},model:{value:t.searchData.appId,callback:function(e){t.$set(t.searchData,"appId",e)},expression:"searchData.appId"}},[r("a-select-option",{key:""},[t._v("全部应用")]),t._l(t.mchAppList,(function(e){return r("a-select-option",{key:e.appId},[t._v(t._s(e.appName)+" ["+t._s(e.appId)+"]")])}))],2)],1),r("jeepay-text-up",{attrs:{placeholder:"分账接收者ID[精准]",msg:t.searchData.receiverId},model:{value:t.searchData.receiverId,callback:function(e){t.$set(t.searchData,"receiverId",e)},expression:"searchData.receiverId"}}),r("jeepay-text-up",{attrs:{placeholder:"接收者账号别名[模糊]",msg:t.searchData.receiverAlias},model:{value:t.searchData.receiverAlias,callback:function(e){t.$set(t.searchData,"receiverAlias",e)},expression:"searchData.receiverAlias"}}),r("jeepay-text-up",{attrs:{placeholder:"组ID[精准]",msg:t.searchData.receiverGroupId},model:{value:t.searchData.receiverGroupId,callback:function(e){t.$set(t.searchData,"receiverGroupId",e)},expression:"searchData.receiverGroupId"}}),r("a-form-item",{staticClass:"table-head-layout",attrs:{label:""}},[r("a-select",{attrs:{placeholder:"账号状态（本系统）","default-value":""},model:{value:t.searchData.state,callback:function(e){t.$set(t.searchData,"state",e)},expression:"searchData.state"}},[r("a-select-option",{attrs:{value:""}},[t._v("全部")]),r("a-select-option",{attrs:{value:"1"}},[t._v("正常分账")]),r("a-select-option",{attrs:{value:"0"}},[t._v("暂停分账")])],1)],1),r("span",{staticClass:"table-page-search-submitButtons"},[r("a-button",{attrs:{type:"primary",icon:"search",loading:t.btnLoading},on:{click:t.searchFunc}},[t._v("查询")]),r("a-button",{staticStyle:{"margin-left":"8px"},attrs:{icon:"reload"},on:{click:function(){return e.searchData={}}}},[t._v("重置")])],1)],1)]),r("div",[t.$access("ENT_DIVISION_RECEIVER_ADD")?r("a-button",{staticClass:"mg-b-30",attrs:{type:"danger",icon:"plus"},on:{click:t.addFunc}},[t._v("新建")]):t._e()],1)],1):t._e(),r("JeepayTable",{ref:"infoTable",attrs:{initData:!1,reqTableDataFunc:t.reqTableDataFunc,tableColumns:t.tableColumns,searchData:t.searchData,rowKey:"receiverId"},on:{btnLoadClose:function(e){t.btnLoading=!1}},scopedSlots:t._u([{key:"ifCodeSlot",fn:function(e){var a=e.record;return["wxpay"===a.ifCode?[r("span",{staticStyle:{color:"green"}},[r("a-icon",{attrs:{type:"wechat"}}),t._v(" 微信")],1)]:"alipay"==a.ifCode?[r("span",{staticStyle:{color:"dodgerblue"}},[r("a-icon",{attrs:{type:"alipay-circle"}}),t._v(" 支付宝")],1)]:[t._v(t._s(a.ifCode))]]}},{key:"stateSlot",fn:function(e){var t=e.record;return[0==t.state?r("div",[r("a-badge",{attrs:{status:"error",text:"暂停分账"}})],1):1==t.state?r("div",[r("a-badge",{attrs:{status:"processing",text:"正常分账"}})],1):r("div",[r("a-badge",{attrs:{status:"warning",text:"未知"}})],1)]}},{key:"opSlot",fn:function(e){var a=e.record;return[r("JeepayTableColumns",[t.$access("ENT_DIVISION_RECEIVER_EDIT")?r("a",{on:{click:function(e){return t.editFunc(a.receiverId)}}},[t._v("修改")]):t._e()])]}}])}),r("ReceiverAdd",{ref:"receiverAdd",attrs:{callbackFunc:t.searchFunc}}),r("ReceiverEdit",{ref:"receiverEdit",attrs:{callbackFunc:t.searchFunc}})],1)],1)},i=[],o=(a("b680"),a("4de4"),a("f339")),n=a("5d5e"),c=a("0fea"),s=a("4f53"),l=a("e01b"),u=a("ab92"),d=[{key:"receiverId",dataIndex:"receiverId",title:"绑定ID"},{key:"ifCode",title:"渠道类型",scopedSlots:{customRender:"ifCodeSlot"}},{key:"receiverAlias",dataIndex:"receiverAlias",title:"账号别名"},{key:"receiverGroupName",dataIndex:"receiverGroupName",title:"组名称"},{key:"accNo",dataIndex:"accNo",title:"分账接收账号"},{key:"accName",dataIndex:"accName",title:"分账接收账号名称"},{key:"relationTypeName",dataIndex:"relationTypeName",title:"分账关系类型"},{title:"状态",scopedSlots:{customRender:"stateSlot"},align:"center"},{key:"bindSuccessTime",dataIndex:"bindSuccessTime",title:"绑定成功时间"},{key:"divisionProfit",dataIndex:"divisionProfit",title:"默认分账比例",customRender:function(e,t,a){return(100*e).toFixed(2)+"%"}},{key:"op",title:"操作",width:"200px",fixed:"right",align:"center",scopedSlots:{customRender:"opSlot"}}],p={components:{JeepayTable:o["a"],JeepayTableColumns:n["a"],JeepayTextUp:s["a"],ReceiverAdd:l["default"],ReceiverEdit:u["default"]},data:function(){return{tableColumns:d,searchData:{appId:""},btnLoading:!1,mchAppList:[]}},mounted:function(){var e=this;c["I"].list(c["d"],{pageSize:-1}).then((function(t){e.mchAppList=t.records,e.mchAppList&&e.mchAppList.length>0&&(e.searchData.appId=e.mchAppList[0].appId+"",e.searchFunc())}))},methods:{reqTableDataFunc:function(e){return c["I"].list(c["b"],e)},searchFunc:function(){this.btnLoading=!0,this.$refs.infoTable.refTable(!0)},addFunc:function(){var e=this;return this.mchAppList.length<=0?this.$message.error("当前商户无任何应用，请先创建应用后再试。"):this.searchData.appId?void this.$refs.receiverAdd.show(this.mchAppList.filter((function(t){return t.appId===e.searchData.appId}))[0]):this.$message.error("请先选择应用。")},editFunc:function(e){this.$refs.receiverEdit.show(e)}}},v=p,f=a("2877"),h=Object(f["a"])(v,r,i,!1,null,null,null);t["default"]=h.exports},de7e:function(e,t,a){},e01b:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.visible?a("a-drawer",{attrs:{visible:e.visible,closable:!0,maskClosable:!1,"body-style":{paddingBottom:"80px"},"drawer-style":{backgroundColor:"#f0f2f5"},width:"80%"},on:{close:e.onClose}},[a("a-descriptions",{attrs:{title:"绑定分账接收者账号"}},[a("a-descriptions-item",{attrs:{label:"当前应用"}},[a("span",{staticStyle:{color:"red"}},[e._v(e._s(e.appInfo.appName)+" ["+e._s(e.appInfo.appId)+"]")])]),a("a-descriptions-item",{attrs:{label:"选择要加入到的账号分组"}},[a("a-select",{staticStyle:{width:"210px"},attrs:{placeholder:"账号分组"},model:{value:e.selectedReceiverGroupId,callback:function(t){e.selectedReceiverGroupId=t},expression:"selectedReceiverGroupId"}},e._l(e.allReceiverGroup,(function(t){return a("a-select-option",{key:t.receiverGroupId,attrs:{value:t.receiverGroupId}},[e._v(e._s(t.receiverGroupName))])})),1)],1)],1),a("a-divider"),a("a-card",{directives:[{name:"show",rawName:"v-show",value:e.appSupportIfCodes.indexOf("wxpay")>=0,expression:"appSupportIfCodes.indexOf('wxpay') >= 0"}],attrs:{title:"微信账号"}},[a("a",{attrs:{slot:"extra",href:"#"},slot:"extra"},[a("a-button",{staticStyle:{background:"green",color:"white"},attrs:{icon:"wechat"},on:{click:function(t){return e.addReceiverRow("wxpay")}}},[e._v("添加【微信官方】分账接收账号")])],1),a("a-table",{attrs:{columns:e.accTableColumns,"data-source":e.receiverTableData.filter((function(e){return"wxpay"==e.ifCode})),pagination:!1,rowKey:"rowKey"},scopedSlots:e._u([{key:"reqBindStateSlot",fn:function(t){return[a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.reqBindState,expression:"record.reqBindState == 0"}],staticStyle:{color:"salmon"}},[a("a-icon",{attrs:{type:"info-circle"}}),e._v(" 待绑定 ")],1),a("div",{directives:[{name:"show",rawName:"v-show",value:1==t.reqBindState,expression:"record.reqBindState == 1"}],staticStyle:{color:"green"}},[a("a-icon",{attrs:{type:"check-circle"}}),e._v(" 绑定成功 ")],1),a("div",{directives:[{name:"show",rawName:"v-show",value:2==t.reqBindState,expression:"record.reqBindState == 2"}],staticStyle:{color:"red"}},[a("a-icon",{attrs:{type:"close-circle"}}),e._v(" 绑定异常 ")],1)]}},{key:"receiverAliasSlot",fn:function(t){return[a("a-input",{staticStyle:{width:"150px"},attrs:{placeholder:"(选填)默认为账号"},model:{value:t.receiverAlias,callback:function(a){e.$set(t,"receiverAlias",a)},expression:"record.receiverAlias"}})]}},{key:"accTypeSlot",fn:function(t){return[a("a-select",{staticStyle:{width:"110px"},attrs:{placeholder:"账号类型","default-value":"0"},model:{value:t.accType,callback:function(a){e.$set(t,"accType",a)},expression:"record.accType"}},[a("a-select-option",{attrs:{value:"0"}},[e._v("个人")]),a("a-select-option",{attrs:{value:"1"}},[e._v("微信商户")])],1)]}},{key:"accNoSlot",fn:function(t){return[a("a-input",{staticStyle:{width:"150px"},model:{value:t.accNo,callback:function(a){e.$set(t,"accNo",a)},expression:"record.accNo"}}),0==t.accType?a("a-button",{attrs:{type:"link"},on:{click:function(a){return e.showChannelUserModal("wxpay",t)}}},[e._v("扫码获取")]):e._e()]}},{key:"accNameSlot",fn:function(t){return[a("a-input",{model:{value:t.accName,callback:function(a){e.$set(t,"accName",a)},expression:"record.accName"}})]}},{key:"relationTypeSlot",fn:function(t){return[a("a-select",{staticStyle:{width:"110px"},attrs:{labelInValue:"",placeholder:"分账关系类型",defaultValue:{key:"PARTNER"}},on:{change:function(a){return e.changeRelationType(t,a)}}},[a("a-select-option",{key:"PARTNER"},[e._v("合作伙伴")]),a("a-select-option",{key:"SERVICE_PROVIDER"},[e._v("服务商")]),a("a-select-option",{key:"STORE"},[e._v("门店")]),a("a-select-option",{key:"STAFF"},[e._v("员工")]),a("a-select-option",{key:"STORE_OWNER"},[e._v("店主")]),a("a-select-option",{key:"HEADQUARTER"},[e._v("总部")]),a("a-select-option",{key:"BRAND"},[e._v("品牌方")]),a("a-select-option",{key:"DISTRIBUTOR"},[e._v("分销商")]),a("a-select-option",{key:"USER"},[e._v("用户")]),a("a-select-option",{key:"SUPPLIER"},[e._v("供应商")]),a("a-select-option",{key:"CUSTOM"},[e._v("自定义")])],1)]}},{key:"relationTypeNameSlot",fn:function(t){return[a("a-input",{attrs:{disabled:"CUSTOM"!==t.relationType},model:{value:t.relationTypeName,callback:function(a){e.$set(t,"relationTypeName",a)},expression:"record.relationTypeName"}})]}},{key:"divisionProfitSlot",fn:function(t){return[a("a-input",{staticStyle:{width:"65px"},model:{value:t.divisionProfit,callback:function(a){e.$set(t,"divisionProfit",a)},expression:"record.divisionProfit"}}),e._v(" % ")]}},{key:"opSlot",fn:function(t){return[a("a-button",{attrs:{type:"link"},on:{click:function(a){return e.delRow(t)}}},[e._v("删除")])]}}],null,!1,1021924501)})],1),a("br"),a("a-card",{directives:[{name:"show",rawName:"v-show",value:e.appSupportIfCodes.indexOf("alipay")>=0,expression:"appSupportIfCodes.indexOf('alipay') >= 0"}],attrs:{title:"支付宝账号"}},[a("a",{attrs:{slot:"extra",href:"#"},slot:"extra"},[a("a-button",{staticStyle:{background:"dodgerblue",color:"white"},attrs:{icon:"alipay-circle"},on:{click:function(t){return e.addReceiverRow("alipay")}}},[e._v("添加【支付宝官方】分账接收账号")])],1),a("a-table",{attrs:{columns:e.accTableColumns,"data-source":e.receiverTableData.filter((function(e){return"alipay"==e.ifCode})),pagination:!1,rowKey:"rowKey"},scopedSlots:e._u([{key:"reqBindStateSlot",fn:function(t){return[a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.reqBindState,expression:"record.reqBindState == 0"}],staticStyle:{color:"salmon"}},[a("a-icon",{attrs:{type:"info-circle"}}),e._v(" 待绑定 ")],1),a("div",{directives:[{name:"show",rawName:"v-show",value:1==t.reqBindState,expression:"record.reqBindState == 1"}],staticStyle:{color:"green"}},[a("a-icon",{attrs:{type:"check-circle"}}),e._v(" 绑定成功 ")],1),a("div",{directives:[{name:"show",rawName:"v-show",value:2==t.reqBindState,expression:"record.reqBindState == 2"}],staticStyle:{color:"red"}},[a("a-icon",{attrs:{type:"close-circle"}}),e._v(" 绑定异常 ")],1)]}},{key:"receiverAliasSlot",fn:function(t){return[a("a-input",{staticStyle:{width:"150px"},attrs:{placeholder:"(选填)默认为账号"},model:{value:t.receiverAlias,callback:function(a){e.$set(t,"receiverAlias",a)},expression:"record.receiverAlias"}})]}},{key:"accTypeSlot",fn:function(t){return[a("a-select",{staticStyle:{width:"110px"},attrs:{placeholder:"账号类型","default-value":"0"},model:{value:t.accType,callback:function(a){e.$set(t,"accType",a)},expression:"record.accType"}},[a("a-select-option",{attrs:{value:"0"}},[e._v("个人")]),a("a-select-option",{attrs:{value:"1"}},[e._v("微信商户")])],1)]}},{key:"accNoSlot",fn:function(t){return[a("a-input",{staticStyle:{width:"150px"},model:{value:t.accNo,callback:function(a){e.$set(t,"accNo",a)},expression:"record.accNo"}}),0==t.accType?a("a-button",{attrs:{type:"link"},on:{click:function(a){return e.showChannelUserModal("alipay",t)}}},[e._v("扫码获取")]):e._e()]}},{key:"accNameSlot",fn:function(t){return[a("a-input",{model:{value:t.accName,callback:function(a){e.$set(t,"accName",a)},expression:"record.accName"}})]}},{key:"relationTypeSlot",fn:function(t){return[a("a-select",{staticStyle:{width:"110px"},attrs:{labelInValue:"",placeholder:"分账关系类型",defaultValue:{key:"PARTNER"}},on:{change:function(a){return e.changeRelationType(t,a)}}},[a("a-select-option",{key:"PARTNER"},[e._v("合作伙伴")]),a("a-select-option",{key:"SERVICE_PROVIDER"},[e._v("服务商")]),a("a-select-option",{key:"STORE"},[e._v("门店")]),a("a-select-option",{key:"STAFF"},[e._v("员工")]),a("a-select-option",{key:"STORE_OWNER"},[e._v("店主")]),a("a-select-option",{key:"HEADQUARTER"},[e._v("总部")]),a("a-select-option",{key:"BRAND"},[e._v("品牌方")]),a("a-select-option",{key:"DISTRIBUTOR"},[e._v("分销商")]),a("a-select-option",{key:"USER"},[e._v("用户")]),a("a-select-option",{key:"SUPPLIER"},[e._v("供应商")]),a("a-select-option",{key:"CUSTOM"},[e._v("自定义")])],1)]}},{key:"relationTypeNameSlot",fn:function(t){return[a("a-input",{attrs:{disabled:"CUSTOM"!==t.relationType},model:{value:t.relationTypeName,callback:function(a){e.$set(t,"relationTypeName",a)},expression:"record.relationTypeName"}})]}},{key:"divisionProfitSlot",fn:function(t){return[a("a-input",{staticStyle:{width:"65px"},model:{value:t.divisionProfit,callback:function(a){e.$set(t,"divisionProfit",a)},expression:"record.divisionProfit"}}),e._v(" % ")]}},{key:"opSlot",fn:function(t){return[a("a-button",{attrs:{type:"link"},on:{click:function(a){return e.delRow(t)}}},[e._v("删除")])]}}],null,!1,818258206)})],1),a("div",{staticClass:"drawer-btn-center "},[a("a-button",{style:{marginRight:"8px"},attrs:{type:"primary",icon:"rocket"},on:{click:function(t){return e.reqBatchBindReceiver(0)}}},[e._v("发起绑定请求")]),a("a-button",{attrs:{icon:"close"},on:{click:e.onClose}},[e._v("关闭")])],1),a("ChannelUserModal",{ref:"channelUserModal",on:{changeChannelUserId:function(t){return e.changeChannelUserIdFunc(t)}}})],1):e._e()},i=[],o=(a("a434"),a("ca00")),n=a("29b2"),c=a("0fea"),s=[{key:"reqBindState",title:"状态",scopedSlots:{customRender:"reqBindStateSlot"}},{key:"receiverAlias",title:"账号别名",scopedSlots:{customRender:"receiverAliasSlot"}},{key:"accType",title:"账号类型",scopedSlots:{customRender:"accTypeSlot"}},{key:"accNo",width:"300px",title:"接收方账号",scopedSlots:{customRender:"accNoSlot"}},{key:"accName",width:"180px",title:"接收方姓名",scopedSlots:{customRender:"accNameSlot"}},{key:"relationType",title:"分账关系",scopedSlots:{customRender:"relationTypeSlot"}},{key:"relationTypeName",width:"200px",title:"关系名称",scopedSlots:{customRender:"relationTypeNameSlot"}},{key:"divisionProfit",title:"默认分账比例",scopedSlots:{customRender:"divisionProfitSlot"}},{key:"op",title:"操作",scopedSlots:{customRender:"opSlot"}}],l={reqBindState:0,receiverAlias:"",receiverGroupId:"",appId:"",ifCode:"",accType:"0",accNo:"",accName:"",relationType:"PARTNER",relationTypeName:"合作伙伴",divisionProfit:""},u={components:{ChannelUserModal:n["a"]},props:{callbackFunc:{type:Function,default:function(){return{}}}},data:function(){return{visible:!1,appInfo:null,accTableColumns:s,allReceiverGroup:[],selectedReceiverGroupId:"",appSupportIfCodes:[],receiverTableData:[]}},methods:{show:function(e){var t=this;this.appSupportIfCodes=[],this.receiverTableData=[],c["I"].list(c["c"],{pageSize:-1}).then((function(e){t.allReceiverGroup=e.records,t.allReceiverGroup&&t.allReceiverGroup.length>0&&(t.selectedReceiverGroupId=t.allReceiverGroup[0].receiverGroupId)})),Object(c["u"])(e.appId).then((function(e){t.appSupportIfCodes=e})),this.appInfo=e,this.visible=!0},onClose:function(){this.callbackFunc(),this.visible=!1},delRow:function(e){var t=this.receiverTableData.indexOf(e);t>-1&&this.receiverTableData.splice(t,1)},changeRelationType:function(e,t){e.relationType=t.key,"CUSTOM"!==t.key?e.relationTypeName=t.label:e.relationTypeName=""},showChannelUserModal:function(e,t){this.$refs.channelUserModal.showModal(this.appInfo.appId,e,t)},changeChannelUserIdFunc:function(e){var t=e.channelUserId,a=e.extObject;a.accNo=t},addReceiverRow:function(e){if(!this.selectedReceiverGroupId)return this.$message.error("请选选择要加入的分组");this.receiverTableData.push(Object.assign({},l,{rowKey:Object(o["a"])(),ifCode:e,appId:this.appInfo.appId}))},reqBatchBindReceiver:function(e){var t=this.$createElement,a=this;if(a.receiverTableData.length<=0)return a.$message.error("请先添加账号");if(e>=a.receiverTableData.length)return this.$message.success("已完成所有账号的绑定操作");var r=a.receiverTableData[e];return r.receiverGroupId=a.selectedReceiverGroupId,1===r.reqBindState?a.reqBatchBindReceiver(++e):r.accNo?"CUSTOM"!==r.relationType||r.relationTypeName?!r.divisionProfit||r.divisionProfit<=0||r.divisionProfit>100?this.$message.error("第".concat(e+1,"条： 默认分账比例请设置在[0.01% ~ 100% ] 之间")):void c["I"].add(c["b"],r).then((function(i){1===i.bindState?(a.reqBatchBindReceiver(++e),r.reqBindState=1):(r.reqBindState=2,a.$infoBox.modalError("第".concat(e+1,"条： 绑定异常"),t("div",[t("div",["错误码：",i.errCode]),t("div",["错误信息：",i.errMsg])])))})).catch((function(){r.reqBindState=2})):this.$message.error("第".concat(e+1,"条： 自定义类型时接收方账号名称不能为空")):this.$message.error("第".concat(e+1,"条： 接收方账号不能为空"))}}},d=u,p=a("2877"),v=Object(p["a"])(d,r,i,!1,null,null,null);t["default"]=v.exports},f339:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-table",{attrs:{columns:e.tableColumns,"data-source":e.apiResData.records,pagination:e.pagination,loading:e.showLoading,"row-selection":e.rowSelection,rowKey:e.rowKey,scroll:{x:e.scrollX},customRow:function(t,a){return e.tableRowCrossColor?{style:{"background-color":a%2==0?"#FCFCFC":"#FFFFFF"}}:{}}},on:{change:e.handleTableChange},scopedSlots:e._u([e._l(e.columnsCustomSlots,(function(t){return{key:t.customRender,fn:function(a){return[e._t(t.customRender,null,{record:a})]}}}))],null,!0)})],1)},i=[],o=a("5530"),n=(a("a9e3"),a("d81d"),a("4de4"),{name:"JeepayTable",props:{initData:{type:Boolean,default:!0},tableColumns:Array,reqTableDataFunc:{type:Function},currentChange:{type:Function,default:function(e,t){}},searchData:Object,pageSize:{type:Number,default:10},rowSelection:Object,rowKey:{type:[String,Function]},scrollX:{type:Number,default:800},tableRowCrossColor:{type:Boolean,default:!1}},data:function(){return{apiResData:{total:0,records:[]},iPage:{pageNumber:1,pageSize:this.pageSize},pagination:{total:0,current:1,pageSize:this.pageSize,showSizeChanger:!0,showTotal:function(e){return"共".concat(e,"条")}},showLoading:!1}},computed:{columnsCustomSlots:function(){return this.tableColumns.filter((function(e){return e.scopedSlots})).map((function(e){return e.scopedSlots}))}},mounted:function(){this.initData&&this.refTable(!0)},methods:{handleTableChange:function(e,t,a){this.pagination=e,this.iPage=Object(o["a"])({pageSize:e.pageSize,pageNumber:e.current,sortField:a.columnKey,sortOrder:a.order},t),this.refTable()},refTable:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=this;t&&(this.iPage.pageNumber=1,this.pagination.current=1),this.showLoading=!0,this.reqTableDataFunc(Object.assign({},this.iPage,this.searchData)).then((function(t){e.pagination.total=t.total,e.apiResData=t,e.showLoading=!1,0===t.records.length&&e.iPage.pageNumber>1&&a.$nextTick((function(){var r=t.total/e.iPage.pageSize+(t.total%e.iPage.pageSize===0?0:1);if(0===r)return!1;var i=e.iPage.pageNumber-1>r?r:e.iPage.pageNumber-1;e.iPage.pageNumber=i,e.pagination.current=i,a.refTable(!1)})),a.$emit("btnLoadClose")})).catch((function(t){e.showLoading=!1,a.$emit("btnLoadClose")}))}}}),c=n,s=(a("f705"),a("2877")),l=Object(s["a"])(c,r,i,!1,null,null,null);t["a"]=l.exports},f705:function(e,t,a){"use strict";a("27fc")}}]);